var res = {'data':'HTTP/1.1 200 Partial Content\x0aDate: Sun, 20 Sep 2020 15:00:01 GMT\x0aServer: Apache/2.4.29 (Ubuntu)\x0aLast-Modified: Tue, 20 Aug 2019 22:42:51 GMT\x0aETag: \x22190ba-590942d2c70c0-gzip\x22\x0aAccept-Ranges: bytes\x0aVary: Accept-Encoding\x0aContent-Encoding: gzip\x0aContent-Range: bytes 0-23085/23086\x0aContent-Length: 23086\x0aKeep-Alive: timeout=5, max=61\x0aConnection: Keep-Alive\x0aContent-Type: application/javascript\x0a\x0a!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{enumerable:!0,get:d})},b.r=function(a){\x22undefined\x22!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:\x22Module\x22}),Object.defineProperty(a,\x22__esModule\x22,{value:!0})},b.t=function(a,c){if(1&c&&(a=b(a)),8&c)return a;if(4&c&&\x22object\x22==typeof a&&a&&a.__esModule)return a;var d=Object.create(null);if(b.r(d),Object.defineProperty(d,\x22default\x22,{enumerable:!0,value:a}),2&c&&\x22string\x22!=typeof a)for(var e in a)b.d(d,e,function(b){return a[b]}.bind(null,e));return d},b.n=function(a){var c=a&&a.__esModule?function(){return a[\x22default\x22]}:function(){return a};return b.d(c,\x22a\x22,c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p=\x22\x22,b(b.s=29)}(Array(29).concat([function(a,b,c){a.exports=c(30)},function(a,b,c){var d,e=wp.media,f=jQuery;e.isTouchDevice=\x22ontouchend\x22in document,d=e.view.l10n=window._wpMediaViewsL10n||{},e.view.settings=d.settings||{},delete d.settings,e.model.settings.post=e.view.settings.post,f.support.transition=function(){var a,b=document.documentElement.style,c={WebkitTransition:\x22webkitTransitionEnd\x22,MozTransition:\x22transitionend\x22,OTransition:\x22oTransitionEnd otransitionend\x22,transition:\x22transitionend\x22};return a=_.find(_.keys(c),function(a){return!_.isUndefined(b[a])}),a&&{end:c[a]}}(),e.events=_.extend({},Backbone.Events),e.transition=function(a,b){var c=f.Deferred();return b=b||2e3,f.support.transition?(a instanceof f||(a=f(a)),a.first().one(f.support.transition.end,c.resolve),_.delay(c.resolve,b)):c.resolve(),c.promise()},e.controller.Region=c(31),e.controller.StateMachine=c(32),e.controller.State=c(33),e.selectionSync=c(34),e.controller.Library=c(35),e.controller.ImageDetails=c(36),e.controller.GalleryEdit=c(37),e.controller.GalleryAdd=c(38),e.controller.CollectionEdit=c(39),e.controller.CollectionAdd=c(40),e.controller.FeaturedImage=c(41),e.controller.ReplaceImage=c(42),e.controller.EditImage=c(43),e.controller.MediaLibrary=c(44),e.controller.Embed=c(45),e.controller.Cropper=c(46),e.controller.CustomizeImageCropper=c(47),e.controller.SiteIconCropper=c(48),e.View=c(49),e.view.Frame=c(50),e.view.MediaFrame=c(51),e.view.MediaFrame.Select=c(52),e.view.MediaFrame.Post=c(53),e.view.MediaFrame.ImageDetails=c(54),e.view.Modal=c(55),e.view.FocusManager=c(56),e.view.UploaderWindow=c(57),e.view.EditorUploader=c(58),e.view.UploaderInline=c(59),e.view.UploaderStatus=c(60),e.view.UploaderStatusError=c(61),e.view.Toolbar=c(62),e.view.Toolbar.Select=c(63),e.view.Toolbar.Embed=c(64),e.view.Button=c(65),e.view.ButtonGroup=c(66),e.view.PriorityList=c(67),e.view.MenuItem=c(68),e.view.Menu=c(69),e.view.RouterItem=c(70),e.view.Router=c(71),e.view.Sidebar=c(72),e.view.Attachment=c(73),e.view.Attachment.Library=c(74),e.view.Attachment.EditLibrary=c(75),e.view.Attachments=c(76),e.view.Search=c(77),e.view.AttachmentFilters=c(78),e.view.DateFilter=c(79),e.view.AttachmentFilters.Uploaded=c(80),e.view.AttachmentFilters.All=c(81),e.view.AttachmentsBrowser=c(82),e.view.Selection=c(83),e.view.Attachment.Selection=c(84),e.view.Attachments.Selection=c(85),e.view.Attachment.EditSelection=c(86),e.view.Settings=c(87),e.view.Settings.AttachmentDisplay=c(88),e.view.Settings.Gallery=c(89),e.view.Settings.Playlist=c(90),e.view.Attachment.Details=c(91),e.view.AttachmentCompat=c(92),e.view.Iframe=c(93),e.view.Embed=c(94),e.view.Label=c(95),e.view.EmbedUrl=c(96),e.view.EmbedLink=c(97),e.view.EmbedImage=c(98),e.view.ImageDetails=c(99),e.view.Cropper=c(100),e.view.SiteIconCropper=c(101),e.view.SiteIconPreview=c(102),e.view.EditImage=c(103),e.view.Spinner=c(104),e.view.Heading=c(105)},function(a,b){var c=function(a){_.extend(this,_.pick(a||{},\x22id\x22,\x22view\x22,\x22selector\x22))};c.extend=Backbone.Model.extend,_.extend(c.prototype,{mode:function(a){return a?a===this._mode?this:(this.trigger(\x22deactivate\x22),this._mode=a,this.render(a),this.trigger(\x22activate\x22),this):this._mode},render:function(a){if(a&&a!==this._mode)return this.mode(a);var b,c={view:null};return this.trigger(\x22create\x22,c),b=c.view,this.trigger(\x22render\x22,b),b&&this.set(b),this},get:function(){return this.view.views.first(this.selector)},set:function(a,b){return b&&(b.add=!1),this.view.views.set(this.selector,a,b)},trigger:function(a){var b,c;if(this._mode)return c=_.toArray(arguments),b=this.id+\x22:\x22+a,c[0]=b+\x22:\x22+this._mode,this.view.trigger.apply(this.view,c),c[0]=b,this.view.trigger.apply(this.view,c),this}}),a.exports=c},function(a,b){var c=function(a){this.states=new Backbone.Collection(a)};c.extend=Backbone.Model.extend,_.extend(c.prototype,Backbone.Events,{state:function(a){return this.states=this.states||new Backbone.Collection,a=a||this._state,a&&!this.states.get(a)&&this.states.add({id:a}),this.states.get(a)},setState:function(a){var b=this.state();return b&&a===b.id||!this.states||!this.states.get(a)?this:(b&&(b.trigger(\x22deactivate\x22),this._lastState=b.id),this._state=a,this.state().trigger(\x22activate\x22),this)},lastState:function(){if(this._lastState)return this.state(this._lastState)}}),_.each([\x22on\x22,\x22off\x22,\x22trigger\x22],function(a){c.prototype[a]=function(){return this.states=this.states||new Backbone.Collection,this.states[a].apply(this.states,arguments),this}}),a.exports=c},function(a,b){var c=Backbone.Model.extend({constructor:function(){this.on(\x22activate\x22,this._preActivate,this),this.on(\x22activate\x22,this.activate,this),this.on(\x22activate\x22,this._postActivate,this),this.on(\x22deactivate\x22,this._deactivate,this),this.on(\x22deactivate\x22,this.deactivate,this),this.on(\x22reset\x22,this.reset,this),this.on(\x22ready\x22,this._ready,this),this.on(\x22ready\x22,this.ready,this),Backbone.Model.apply(this,arguments),this.on(\x22change:menu\x22,this._updateMenu,this)},ready:function(){},activate:function(){},deactivate:function(){},reset:function(){},_ready:function(){this._updateMenu()},_preActivate:function(){this.active=!0},_postActivate:function(){this.on(\x22change:menu\x22,this._menu,this),this.on(\x22change:titleMode\x22,this._title,this),this.on(\x22change:content\x22,this._content,this),this.on(\x22change:toolbar\x22,this._toolbar,this),this.frame.on(\x22title:render:default\x22,this._renderTitle,this),this._title(),this._menu(),this._toolbar(),this._content(),this._router()},_deactivate:function(){this.active=!1,this.frame.off(\x22title:render:default\x22,this._renderTitle,this),this.off(\x22change:menu\x22,this._menu,this),this.off(\x22change:titleMode\x22,this._title,this),this.off(\x22change:content\x22,this._content,this),this.off(\x22change:toolbar\x22,this._toolbar,this)},_title:function(){this.frame.title.render(this.get(\x22titleMode\x22)||\x22default\x22)},_renderTitle:function(a){a.$el.text(this.get(\x22title\x22)||\x22\x22)},_router:function(){var a,b=this.frame.router,c=this.get(\x22router\x22);this.frame.$el.toggleClass(\x22hide-router\x22,!c),c&&(this.frame.router.render(c),a=b.get(),a&&a.select&&a.select(this.frame.content.mode()))},_menu:function(){var a,b=this.frame.menu,c=this.get(\x22menu\x22);this.frame.$el.toggleClass(\x22hide-menu\x22,!c),c&&(b.mode(c),a=b.get(),a&&a.select&&a.select(this.id))},_updateMenu:function(){var a=this.previous(\x22menu\x22),b=this.get(\x22menu\x22);a&&this.frame.off(\x22menu:render:\x22+a,this._renderMenu,this),b&&this.frame.on(\x22menu:render:\x22+b,this._renderMenu,this)},_renderMenu:function(a){var b=this.get(\x22menuItem\x22),c=this.get(\x22title\x22),d=this.get(\x22priority\x22);!b&&c&&(b={text:c},d&&(b.priority=d)),b&&a.set(this.id,b)}});_.each([\x22toolbar\x22,\x22content\x22],function(a){c.prototype[\x22_\x22+a]=function(){var b=this.get(a);b&&this.frame[a].render(b)}}),a.exports=c},function(a,b){var c={syncSelection:function(){var a=this.get(\x22selection\x22),b=this.frame._selection;this.get(\x22syncSelection\x22)&&b&&a&&(a.multiple&&(a.reset([],{silent:!0}),a.validateAll(b.attachments),b.difference=_.difference(b.attachments.models,a.models)),a.single(b.single))},recordSelection:function(){var a=this.get(\x22selection\x22),b=this.frame._selection;this.get(\x22syncSelection\x22)&&b&&a&&(a.multiple?(b.attachments.reset(a.toArray().concat(b.difference)),b.difference=[]):b.attachments.add(a.toArray()),b.single=a._single)}};a.exports=c},function(a,b){var c,d=wp.media.view.l10n,e=window.getUserSetting,f=window.setUserSetting;c=wp.media.controller.State.extend({defaults:{id:\x22library\x22,title:d.mediaLibraryTitle,multiple:!1,content:\x22upload\x22,menu:\x22default\x22,router:\x22browse\x22,toolbar:\x22select\x22,searchable:!0,filterable:!1,sortable:!0,autoSelect:!0,describe:!1,contentUserSetting:!0,syncSelection:!0},initialize:function(){var a,b=this.get(\x22selection\x22);this.get(\x22library\x22)||this.set(\x22library\x22,wp.media.query()),b instanceof wp.media.model.Selection||(a=b,a||(a=this.get(\x22library\x22).props.toJSON(),a=_.omit(a,\x22orderby\x22,\x22query\x22)),this.set(\x22selection\x22,new wp.media.model.Selection(null,{multiple:this.get(\x22multiple\x22),props:a}))),this.resetDisplays()},activate:function(){this.syncSelection(),wp.Uploader.queue.on(\x22add\x22,this.uploading,this),this.get(\x22selection\x22).on(\x22add remove reset\x22,this.refreshContent,this),this.get(\x22router\x22)&&this.get(\x22contentUserSetting\x22)&&(this.frame.on(\x22content:activate\x22,this.saveContentMode,this),this.set(\x22content\x22,e(\x22libraryContent\x22,this.get(\x22content\x22))))},deactivate:function(){this.recordSelection(),this.frame.off(\x22content:activate\x22,this.saveContentMode,this),this.get(\x22selection\x22).off(null,null,this),wp.Uploader.queue.off(null,null,this)},reset:function(){this.get(\x22selection\x22).reset(),this.resetDisplays(),this.refreshContent()},resetDisplays:function(){var a=wp.media.view.settings.defaultProps;this._displays=[],this._defaultDisplaySettings={align:e(\x22align\x22,a.align)||\x22none\x22,size:e(\x22imgsize\x22,a.size)||\x22medium\x22,link:e(\x22urlbutton\x22,a.link)||\x22none\x22}},display:function(a){var b=this._displays;return b[a.cid]||(b[a.cid]=new Backbone.Model(this.defaultDisplaySettings(a))),b[a.cid]},defaultDisplaySettings:function(a){var b=_.clone(this._defaultDisplaySettings);return(b.canEmbed=this.canEmbed(a))?b.link=\x22embed\x22:this.isImageAttachment(a)||\x22none\x22!==b.link||(b.link=\x22file\x22),b},isImageAttachment:function(a){return a.get(\x22uploading\x22)?/\x5c.(jpe?g|png|gif)$/i.test(a.get(\x22filename\x22)):\x22image\x22===a.get(\x22type\x22)},canEmbed:function(a){if(!a.get(\x22uploading\x22)){var b=a.get(\x22type\x22);if(\x22audio\x22!==b&&\x22video\x22!==b)return!1}return _.contains(wp.media.view.settings.embedExts,a.get(\x22filename\x22).split(\x22.\x22).pop())},refreshContent:function(){var a=this.get(\x22selection\x22),b=this.frame,c=b.router.get(),d=b.content.mode();this.active&&!a.length&&c&&!c.get(d)&&this.frame.content.render(this.get(\x22content\x22))},uploading:function(a){var b=this.frame.content;\x22upload\x22===b.mode()&&this.frame.content.mode(\x22browse\x22),this.get(\x22autoSelect\x22)&&(this.get(\x22selection\x22).add(a),this.frame.trigger(\x22library:selection:add\x22))},saveContentMode:function(){if(\x22browse\x22===this.get(\x22router\x22)){var a=this.frame.content.mode(),b=this.frame.router.get();b&&b.get(a)&&f(\x22libraryContent\x22,a)}}}),_.extend(c.prototype,wp.media.selectionSync),a.exports=c},function(a,b){var c,d=wp.media.controller.State,e=wp.media.controller.Library,f=wp.media.view.l10n;c=d.extend({defaults:_.defaults({id:\x22image-details\x22,title:f.imageDetailsTitle,content:\x22image-details\x22,menu:!1,router:!1,toolbar:\x22image-details\x22,editing:!1,priority:60},e.prototype.defaults),initialize:function(a){this.image=a.image,d.prototype.initialize.apply(this,arguments)},activate:function(){this.frame.modal.$el.addClass(\x22image-details\x22)}}),a.exports=c},function(a,b){var c,d=wp.media.controller.Library,e=wp.media.view.l10n;c=d.extend({defaults:{id:\x22gallery-edit\x22,title:e.editGalleryTitle,multiple:!1,searchable:!1,sortable:!0,date:!1,display:!1,content:\x22browse\x22,toolbar:\x22gallery-edit\x22,describe:!0,displaySettings:!0,dragInfo:!0,idealColumnWidth:170,editing:!1,priority:60,syncSelection:!1},initialize:function(){this.get(\x22library\x22)||this.set(\x22library\x22,new wp.media.model.Selection),this.get(\x22AttachmentView\x22)||this.set(\x22AttachmentView\x22,wp.media.view.Attachment.EditLibrary),d.prototype.initialize.apply(this,arguments)},activate:function(){var a=this.get(\x22library\x22);a.props.set(\x22type\x22,\x22image\x22),this.get(\x22library\x22).observe(wp.Uploader.queue),this.frame.on(\x22content:render:browse\x22,this.gallerySettings,this),d.prototype.activate.apply(this,arguments)},deactivate:function(){this.get(\x22library\x22).unobserve(wp.Uploader.queue),this.frame.off(\x22content:render:browse\x22,this.gallerySettings,this),d.prototype.deactivate.apply(this,arguments)},gallerySettings:function(a){if(this.get(\x22displaySettings\x22)){var b=this.get(\x22library\x22);b&&a&&(b.gallery=b.gallery||new Backbone.Model,a.sidebar.set({gallery:new wp.media.view.Settings.Gallery({controller:this,model:b.gallery,priority:40})}),a.toolbar.set(\x22reverse\x22,{text:e.reverseOrder,priority:80,click:function(){b.reset(b.toArray().reverse())}}))}}}),a.exports=c},function(a,b){var c,d=wp.media.model.Selection,e=wp.media.controller.Library,f=wp.media.view.l10n;c=e.extend({defaults:_.defaults({id:\x22gallery-library\x22,title:f.addToGalleryTitle,multiple:\x22add\x22,filterable:\x22uploaded\x22,menu:\x22gallery\x22,toolbar:\x22gallery-add\x22,priority:100,syncSelection:!1},e.prototype.defaults),initialize:function(){this.get(\x22library\x22)||this.set(\x22library\x22,wp.media.query({type:\x22image\x22})),e.prototype.initialize.apply(this,arguments)},activate:function(){var a=this.get(\x22library\x22),b=this.frame.state(\x22gallery-edit\x22).get(\x22library\x22);this.editLibrary&&this.editLibrary!==b&&a.unobserve(this.editLibrary),a.validator=function(a){return!!this.mirroring.get(a.cid)&&!b.get(a.cid)&&d.prototype.validator.apply(this,arguments)},a.reset(a.mirroring.models,{silent:!0}),a.observe(b),this.editLibrary=b,e.prototype.activate.apply(this,arguments)}}),a.exports=c},function(a,b){var c,d=wp.media.controller.Library,e=wp.media.view.l10n,f=jQuery;c=d.extend({defaults:{multiple:!1,sortable:!0,date:!1,searchable:!1,content:\x22browse\x22,describe:!0,dragInfo:!0,idealColumnWidth:170,editing:!1,priority:60,SettingsView:!1,syncSelection:!1},initialize:function(){var a=this.get(\x22collectionType\x22);\x22video\x22===this.get(\x22type\x22)&&(a=\x22video-\x22+a),this.set(\x22id\x22,a+\x22-edit\x22),this.set(\x22toolbar\x22,a+\x22-edit\x22),this.get(\x22library\x22)||this.set(\x22library\x22,new wp.media.model.Selection),this.get(\x22AttachmentView\x22)||this.set(\x22AttachmentView\x22,wp.media.view.Attachment.EditLibrary),d.prototype.initialize.apply(this,arguments)},activate:function(){var a=this.get(\x22library\x22);a.props.set(\x22type\x22,this.get(\x22type\x22)),this.get(\x22library\x22).observe(wp.Uploader.queue),this.frame.on(\x22content:render:browse\x22,this.renderSettings,this),d.prototype.activate.apply(this,arguments)},deactivate:function(){this.get(\x22library\x22).unobserve(wp.Uploader.queue),this.frame.off(\x22content:render:browse\x22,this.renderSettings,this),d.prototype.deactivate.apply(this,arguments)},renderSettings:function(a){var b=this.get(\x22library\x22),c=this.get(\x22collectionType\x22),d=this.get(\x22dragInfoText\x22),g=this.get(\x22SettingsView\x22),h={};b&&a&&(b[c]=b[c]||new Backbone.Model,h[c]=new g({controller:this,model:b[c],priority:40}),a.sidebar.set(h),d&&a.toolbar.set(\x22dragInfo\x22,new wp.media.View({el:f(\x27\x3cdiv class=\x22instructions\x22\x3e\x27+d+\x22\x3c/div\x3e\x22)[0],priority:-40})),a.toolbar.set(\x22reverse\x22,{text:e.reverseOrder,priority:80,click:function(){b.reset(b.toArray().reverse())}}))}}),a.exports=c},function(a,b){var c,d=wp.media.model.Selection,e=wp.media.controller.Library;c=e.extend({defaults:_.defaults({multiple:\x22add\x22,filterable:\x22uploaded\x22,priority:100,syncSelection:!1},e.prototype.defaults),initialize:function(){var a=this.get(\x22collectionType\x22);\x22video\x22===this.get(\x22type\x22)&&(a=\x22video-\x22+a),this.set(\x22id\x22,a+\x22-library\x22),this.set(\x22toolbar\x22,a+\x22-add\x22),this.set(\x22menu\x22,a),this.get(\x22library\x22)||this.set(\x22library\x22,wp.media.query({type:this.get(\x22type\x22)})),e.prototype.initialize.apply(this,arguments)},activate:function(){var a=this.get(\x22library\x22),b=this.get(\x22editLibrary\x22),c=this.frame.state(this.get(\x22collectionType\x22)+\x22-edit\x22).get(\x22library\x22);b&&b!==c&&a.unobserve(b),a.validator=function(a){return!!this.mirroring.get(a.cid)&&!c.get(a.cid)&&d.prototype.validator.apply(this,arguments)},a.reset(a.mirroring.models,{silent:!0}),a.observe(c),this.set(\x22editLibrary\x22,c),e.prototype.activate.apply(this,arguments)}}),a.exports=c},function(a,b){var c,d=wp.media.model.Attachment,e=wp.media.controller.Library,f=wp.media.view.l10n;c=e.extend({defaults:_.defaults({id:\x22featured-image\x22,title:f.setFeaturedImageTitle,multiple:!1,filterable:\x22uploaded\x22,toolbar:\x22featured-image\x22,priority:60,syncSelection:!0},e.prototype.defaults),initialize:function(){var a,b;this.get(\x22library\x22)||this.set(\x22library\x22,wp.media.query({type:\x22image\x22})),e.prototype.initialize.apply(this,arguments),a=this.get(\x22library\x22),b=a.comparator,a.comparator=function(a,c){var d=!!this.mirroring.get(a.cid),e=!!this.mirroring.get(c.cid);return!d&&e?-1:d&&!e?1:b.apply(this,arguments)},a.observe(this.get(\x22selection\x22))},activate:function(){this.updateSelection(),this.frame.on(\x22open\x22,this.updateSelection,this),e.prototype.activate.apply(this,arguments)},deactivate:function(){this.frame.off(\x22open\x22,this.updateSelection,this),e.prototype.deactivate.apply(this,arguments)},updateSelection:function(){var a,b=this.get(\x22selection\x22),c=wp.media.view.settings.post.featuredImageId;\x22\x22!==c&&-1!==c&&(a=d.get(c),a.fetch()),b.reset(a?[a]:[])}}),a.exports=c},function(a,b){var c,d=wp.media.controller.Library,e=wp.media.view.l10n;c=d.extend({defaults:_.defaults({id:\x22replace-image\x22,title:e.replaceImageTitle,multiple:!1,filterable:\x22uploaded\x22,toolbar:\x22replace\x22,menu:!1,priority:60,syncSelection:!0},d.prototype.defaults),initialize:function(a){var b,c;this.image=a.image,this.get(\x22library\x22)||this.set(\x22library\x22,wp.media.query({type:\x22image\x22})),d.prototype.initialize.apply(this,arguments),b=this.get(\x22library\x22),c=b.comparator,b.comparator=function(a,b){var d=!!this.mirroring.get(a.cid),e=!!this.mirroring.get(b.cid);return!d&&e?-1:d&&!e?1:c.apply(this,arguments)},b.observe(this.get(\x22selection\x22))},activate:function(){this.updateSelection(),d.prototype.activate.apply(this,arguments)},updateSelection:function(){var a=this.get(\x22selection\x22),b=this.image.attachment;a.reset(b?[b]:[])}}),a.exports=c},function(a,b){var c,d=wp.media.view.l10n;c=wp.media.controller.State.extend({defaults:{id:\x22edit-image\x22,title:d.editImage,menu:!1,toolbar:\x22edit-image\x22,content:\x22edit-image\x22,url:\x22\x22},activate:function(){this.frame.on(\x22toolbar:render:edit-image\x22,_.bind(this.toolbar,this))},deactivate:function(){this.frame.off(\x22toolbar:render:edit-image\x22)},toolbar:function(){var a=this.frame,b=a.lastState(),c=b&&b.id;a.toolbar.set(new wp.media.view.Toolbar({controller:a,items:{back:{style:\x22primary\x22,text:d.back,priority:20,click:function(){c?a.setState(c):a.close()}}}}))}}),a.exports=c},function(a,b){var c,d=wp.media.controller.Library;c=d.extend({defaults:_.defaults({filterable:\x22uploaded\x22,displaySettings:!1,priority:80,syncSelection:!1},d.prototype.defaults),initialize:function(a){this.media=a.media,this.type=a.type,this.set(\x22library\x22,wp.media.query({type:this.type})),d.prototype.initialize.apply(this,arguments)},activate:function(){wp.media.frame.lastMime&&(this.set(\x22library\x22,wp.media.query({type:wp.media.frame.lastMime})),delete wp.media.frame.lastMime),d.prototype.activate.apply(this,arguments)}}),a.exports=c},function(a,b){var c,d=wp.media.view.l10n,e=Backbone.$;c=wp.media.controller.State.extend({defaults:{id:\x22embed\x22,title:d.insertFromUrlTitle,content:\x22embed\x22,menu:\x22default\x22,toolbar:\x22main-embed\x22,priority:120,type:\x22link\x22,url:\x22\x22,metadata:{}},sensitivity:400,initialize:function(a){this.metadata=a.metadata,this.debouncedScan=_.debounce(_.bind(this.scan,this),this.sensitivity),this.props=new Backbone.Model(this.metadata||{url:\x22\x22}),this.props.on(\x22change:url\x22,this.debouncedScan,this),this.props.on(\x22change:url\x22,this.refresh,this),this.on(\x22scan\x22,this.scanImage,this)},scan:function(){var a,b=this,c={type:\x22link\x22,scanners:[]};this.props.get(\x22url\x22)&&this.trigger(\x22scan\x22,c),c.scanners.length?(a=c.scanners=e.when.apply(e,c.scanners),a.always(function(){b.get(\x22scanners\x22)===a&&b.set(\x22loading\x22,!1)})):c.scanners=null,c.loading=!!c.scanners,this.set(c)},scanImage:function(a){var b=this.frame,c=this,d=this.props.get(\x22url\x22),f=new Image,g=e.Deferred();a.scanners.push(g.promise()),f.onload=function(){g.resolve(),c===b.state()&&d===c.props.get(\x22url\x22)&&(c.set({type:\x22image\x22}),c.props.set({width:f.width,height:f.height}))},f.onerror=g.reject,f.src=d},refresh:function(){this.frame.toolbar.get().refresh()},reset:function(){this.props.clear().set({url:\x22\x22}),this.active&&this.refresh()}}),a.exports=c},function(a,b){var c,d=wp.media.view.l10n;c=wp.media.controller.State.extend({defaults:{id:\x22cropper\x22,title:d.cropImage,toolbar:\x22crop\x22,content:\x22crop\x22,router:!1,canSkipCrop:!1,doCropArgs:{}},activate:function(){this.frame.on(\x22content:create:crop\x22,this.createCropContent,this),this.frame.on(\x22close\x22,this.removeCropper,this),this.set(\x22selection\x22,new Backbone.Collection(this.frame._selection.single))},deactivate:function(){this.frame.toolbar.mode(\x22browse\x22)},createCropContent:function(){this.cropperView=new wp.media.view.Cropper({controller:this,attachment:this.get(\x22selection\x22).first()}),this.cropperView.on(\x22image-loaded\x22,this.createCropToolbar,this),this.frame.content.set(this.cropperView)},removeCropper:function(){this.imgSelect.cancelSelection(),this.imgSelect.setOptions({remove:!0}),this.imgSelect.update(),this.cropperView.remove()},createCropToolbar:function(){var a,b;a=this.get(\x22canSkipCrop\x22)||!1,b={controller:this.frame,items:{insert:{style:\x22primary\x22,text:d.cropImage,priority:80,requires:{library:!1,selection:!1},click:function(){var a,b=this.controller;a=b.state().get(\x22selection\x22).first(),a.set({cropDetails:b.state().imgSelect.getSelection()}),this.$el.text(d.cropping),this.$el.attr(\x22disabled\x22,!0),b.state().doCrop(a).done(function(a){b.trigger(\x22cropped\x22,a),b.close()}).fail(function(){b.trigger(\x22content:error:crop\x22)})}}}},a&&_.extend(b.items,{skip:{style:\x22secondary\x22,text:d.skipCropping,priority:70,requires:{library:!1,selection:!1},click:function(){var a=this.controller.state().get(\x22selection\x22).first();this.controller.state().cropperView.remove(),this.controller.trigger(\x22skippedcrop\x22,a),this.controller.close()}}}),this.frame.toolbar.set(new wp.media.view.Toolbar(b))},doCrop:function(a){return wp.ajax.post(\x22custom-header-crop\x22,_.extend({},this.defaults.doCropArgs,{nonce:a.get(\x22nonces\x22).edit,id:a.get(\x22id\x22),cropDetails:a.get(\x22cropDetails\x22)}))}}),a.exports=c},function(a,b){var c,d=wp.media.controller;c=d.Cropper.extend({doCrop:function(a){var b=a.get(\x22cropDetails\x22),c=this.get(\x22control\x22),d=b.width/b.height;return c.params.flex_width&&c.params.flex_height?(b.dst_width=b.width,b.dst_height=b.height):(b.dst_width=c.params.flex_width?c.params.height*d:c.params.width,b.dst_height=c.params.flex_height?c.params.width/d:c.params.height),wp.ajax.post(\x22crop-image\x22,{wp_customize:\x22on\x22,nonce:a.get(\x22nonces\x22).edit,id:a.get(\x22id\x22),context:c.id,cropDetails:b})}}),a.exports=c},function(a,b){var c,d=wp.media.controller;c=d.Cropper.extend({activate:function(){this.frame.on(\x22content:create:crop\x22,this.createCropContent,this),this.frame.on(\x22close\x22,this.removeCropper,this),this.set(\x22selection\x22,new Backbone.Collection(this.frame._selection.single))},createCropContent:function(){this.cropperView=new wp.media.view.SiteIconCropper({controller:this,attachment:this.get(\x22selection\x22).first()}),this.cropperView.on(\x22image-loaded\x22,this.createCropToolbar,this),this.frame.content.set(this.cropperView)},doCrop:function(a){var b=a.get(\x22cropDetails\x22),c=this.get(\x22control\x22);return b.dst_width=c.params.width,b.dst_height=c.params.height,wp.ajax.post(\x22crop-image\x22,{nonce:a.get(\x22nonces\x22).edit,id:a.get(\x22id\x22),context:\x22site-icon\x22,cropDetails:b})}}),a.exports=c},function(a,b){var c=wp.Backbone.View.extend({constructor:function(a){a&&a.controller&&(this.controller=a.controller),wp.Backbone.View.apply(this,arguments)},dispose:function(){return this.undelegateEvents(),this.model&&this.model.off&&this.model.off(null,null,this),this.collection&&this.collection.off&&this.collection.off(null,null,this),this.controller&&this.controller.off&&this.controller.off(null,null,this),this},remove:function(){return this.dispose(),wp.Backbone.View.prototype.remove.apply(this,arguments)}});a.exports=c},function(a,b){var c=wp.media.View.extend({initialize:function(){_.defaults(this.options,{mode:[\x22select\x22]}),this._createRegions(),this._createStates(),this._createModes()},_createRegions:function(){this.regions=this.regions?this.regions.slice():[],_.each(this.regions,function(a){this[a]=new wp.media.controller.Region({view:this,id:a,selector:\x22.media-frame-\x22+a})},this)},_createStates:function(){this.states=new Backbone.Collection(null,{model:wp.media.controller.State}),this.states.on(\x22add\x22,function(a){a.frame=this,a.trigger(\x22ready\x22)},this),this.options.states&&this.states.add(this.options.states)},_createModes:function(){this.activeModes=new Backbone.Collection,this.activeModes.on(\x22add remove reset\x22,_.bind(this.triggerModeEvents,this)),_.each(this.options.mode,function(a){this.activateMode(a)},this)},reset:function(){return this.states.invoke(\x22trigger\x22,\x22reset\x22),this},triggerModeEvents:function(a,b,c){var d,e,f={add:\x22activate\x22,remove:\x22deactivate\x22};_.each(c,function(a,b){a&&(d=b)}),_.has(f,d)&&(e=a.get(\x22id\x22)+\x22:\x22+f[d],this.trigger(e))},activateMode:function(a){if(!this.isModeActive(a))return this.activeModes.add([{id:a}]),this.$el.addClass(\x22mode-\x22+a),this},deactivateMode:function(a){return this.isModeActive(a)?(this.activeModes.remove(this.activeModes.where({id:a})),this.$el.removeClass(\x22mode-\x22+a),this.trigger(a+\x22:deactivate\x22),this):this},isModeActive:function(a){return Boolean(this.activeModes.where({id:a}).length)}});_.extend(c.prototype,wp.media.controller.StateMachine.prototype),a.exports=c},function(a,b){var c,d=wp.media.view.Frame,e=jQuery;c=d.extend({className:\x22media-frame\x22,template:wp.template(\x22media-frame\x22),regions:[\x22menu\x22,\x22title\x22,\x22content\x22,\x22toolbar\x22,\x22router\x22],events:{\x22click div.media-frame-title h1\x22:\x22toggleMenu\x22},initialize:function(){d.prototype.initialize.apply(this,arguments),_.defaults(this.options,{title:\x22\x22,modal:!0,uploader:!0}),this.$el.addClass(\x22wp-core-ui\x22),this.options.modal&&(this.modal=new wp.media.view.Modal({controller:this,title:this.options.title}),this.modal.content(this)),!wp.Uploader.limitExceeded&&wp.Uploader.browser.supported||(this.options.uploader=!1),this.options.uploader&&(this.uploader=new wp.media.view.UploaderWindow({controller:this,uploader:{dropzone:this.modal?this.modal.$el:this.$el,container:this.$el}}),this.views.set(\x22.media-frame-uploader\x22,this.uploader)),this.on(\x22attach\x22,_.bind(this.views.ready,this.views),this),this.on(\x22title:create:default\x22,this.createTitle,this),this.title.mode(\x22default\x22),this.on(\x22title:render\x22,function(a){a.$el.append(\x27\x3cspan class=\x22dashicons dashicons-arrow-down\x22\x3e\x3c/span\x3e\x27)}),this.on(\x22menu:create:default\x22,this.createMenu,this)},render:function(){return!this.state()&&this.options.state&&this.setState(this.options.state),d.prototype.render.apply(this,arguments)},createTitle:function(a){a.view=new wp.media.View({controller:this,tagName:\x22h1\x22})},createMenu:function(a){a.view=new wp.media.view.Menu({controller:this})},toggleMenu:function(){this.$el.find(\x22.media-menu\x22).toggleClass(\x22visible\x22)},createToolbar:function(a){a.view=new wp.media.view.Toolbar({controller:this})},createRouter:function(a){a.view=new wp.media.view.Router({controller:this})},createIframeStates:function(a){var b,c=wp.media.view.settings,d=c.tabs,f=c.tabUrl;d&&f&&(b=e(\x22#post_ID\x22),b.length&&(f+=\x22&post_id=\x22+b.val()),_.each(d,function(b,c){this.state(\x22iframe:\x22+c).set(_.defaults({tab:c,src:f+\x22&tab=\x22+c,title:b,content:\x22iframe\x22,menu:\x22default\x22},a))},this),this.on(\x22content:create:iframe\x22,this.iframeContent,this),this.on(\x22content:deactivate:iframe\x22,this.iframeContentCleanup,this),this.on(\x22menu:render:default\x22,this.iframeMenu,this),this.on(\x22open\x22,this.hijackThickbox,this),this.on(\x22close\x22,this.restoreThickbox,this))},iframeContent:function(a){this.$el.addClass(\x22hide-toolbar\x22),a.view=new wp.media.view.Iframe({controller:this})},iframeContentCleanup:function(){this.$el.removeClass(\x22hide-toolbar\x22)},iframeMenu:function(a){var b={};a&&(_.each(wp.media.view.settings.tabs,function(a,c){b[\x22iframe:\x22+c]={text:this.state(\x22iframe:\x22+c).get(\x22title\x22),priority:200}},this),a.set(b))},hijackThickbox:function(){var a=this;window.tb_remove&&!this._tb_remove&&(this._tb_remove=window.tb_remove,window.tb_remove=function(){a.close(),a.reset(),a.setState(a.options.state),a._tb_remove.call(window)})},restoreThickbox:function(){this._tb_remove&&(window.tb_remove=this._tb_remove,delete this._tb_remove)}}),_.each([\x22open\x22,\x22close\x22,\x22attach\x22,\x22detach\x22,\x22escape\x22],function(a){c.prototype[a]=function(){return this.modal&&this.modal[a].apply(this.modal,arguments),this}}),a.exports=c},function(a,b){var c,d=wp.media.view.MediaFrame,e=wp.media.view.l10n;c=d.extend({initialize:function(){d.prototype.initialize.apply(this,arguments),_.defaults(this.options,{selection:[],library:{},multiple:!1,state:\x22library\x22}),this.createSelection(),this.createStates(),this.bindHandlers()},createSelection:function(){var a=this.options.selection;a instanceof wp.media.model.Selection||(this.options.selection=new wp.media.model.Selection(a,{multiple:this.options.multiple})),this._selection={attachments:new wp.media.model.Attachments,difference:[]}},createStates:function(){var a=this.options;this.options.states||this.states.add([new wp.media.controller.Library({library:wp.media.query(a.library),multiple:a.multiple,title:a.title,priority:20})])},bindHandlers:function(){this.on(\x22router:create:browse\x22,this.createRouter,this),this.on(\x22router:render:browse\x22,this.browseRouter,this),this.on(\x22content:create:browse\x22,this.browseContent,this),this.on(\x22content:render:upload\x22,this.uploadContent,this),this.on(\x22toolbar:create:select\x22,this.createSelectToolbar,this)},browseRouter:function(a){a.set({upload:{text:e.uploadFilesTitle,priority:20},browse:{text:e.mediaLibraryTitle,priority:40}})},browseContent:function(a){var b=this.state();this.$el.removeClass(\x22hide-toolbar\x22),a.view=new wp.media.view.AttachmentsBrowser({controller:this,collection:b.get(\x22library\x22),selection:b.get(\x22selection\x22),model:b,sortable:b.get(\x22sortable\x22),search:b.get(\x22searchable\x22),filters:b.get(\x22filterable\x22),date:b.get(\x22date\x22),display:b.has(\x22display\x22)?b.get(\x22display\x22):b.get(\x22displaySettings\x22),dragInfo:b.get(\x22dragInfo\x22),idealColumnWidth:b.get(\x22idealColumnWidth\x22),suggestedWidth:b.get(\x22suggestedWidth\x22),suggestedHeight:b.get(\x22suggestedHeight\x22),AttachmentView:b.get(\x22AttachmentView\x22)})},uploadContent:function(){this.$el.removeClass(\x22hide-toolbar\x22),this.content.set(new wp.media.view.UploaderInline({controller:this}))},createSelectToolbar:function(a,b){b=b||this.options.button||{},b.controller=this,a.view=new wp.media.view.Toolbar.Select(b)}}),a.exports=c},function(a,b){var c,d=wp.media.view.MediaFrame.Select,e=wp.media.controller.Library,f=wp.media.view.l10n;c=d.extend({initialize:function(){this.counts={audio:{count:wp.media.view.settings.attachmentCounts.audio,state:\x22playlist\x22},video:{count:wp.media.view.settings.attachmentCounts.video,state:\x22video-playlist\x22}},_.defaults(this.options,{multiple:!0,editing:!1,state:\x22insert\x22,metadata:{}}),d.prototype.initialize.apply(this,arguments),this.createIframeStates()},createStates:function(){var a=this.options;this.states.add([new e({id:\x22insert\x22,title:f.insertMediaTitle,priority:20,toolbar:\x22main-insert\x22,filterable:\x22all\x22,library:wp.media.query(a.library),multiple:!!a.multiple&&\x22reset\x22,editable:!0,allowLocalEdits:!0,displaySettings:!0,displayUserSettings:!0}),new e({id:\x22gallery\x22,title:f.createGalleryTitle,priority:40,toolbar:\x22main-gallery\x22,filterable:\x22uploaded\x22,multiple:\x22add\x22,editable:!1,library:wp.media.query(_.defaults({type:\x22image\x22},a.library))}),new wp.media.controller.Embed({metadata:a.metadata}),new wp.media.controller.EditImage({model:a.editImage}),new wp.media.controller.GalleryEdit({library:a.selection,editing:a.editing,menu:\x22gallery\x22}),new wp.media.controller.GalleryAdd,new e({id:\x22playlist\x22,title:f.createPlaylistTitle,priority:60,toolbar:\x22main-playlist\x22,filterable:\x22uploaded\x22,multiple:\x22add\x22,editable:!1,library:wp.media.query(_.defaults({type:\x22audio\x22},a.library))}),new wp.media.controller.CollectionEdit({\x0atype:\x22audio\x22,collectionType:\x22playlist\x22,title:f.editPlaylistTitle,SettingsView:wp.media.view.Settings.Playlist,library:a.selection,editing:a.editing,menu:\x22playlist\x22,dragInfoText:f.playlistDragInfo,dragInfo:!1}),new wp.media.controller.CollectionAdd({type:\x22audio\x22,collectionType:\x22playlist\x22,title:f.addToPlaylistTitle}),new e({id:\x22video-playlist\x22,title:f.createVideoPlaylistTitle,priority:60,toolbar:\x22main-video-playlist\x22,filterable:\x22uploaded\x22,multiple:\x22add\x22,editable:!1,library:wp.media.query(_.defaults({type:\x22video\x22},a.library))}),new wp.media.controller.CollectionEdit({type:\x22video\x22,collectionType:\x22playlist\x22,title:f.editVideoPlaylistTitle,SettingsView:wp.media.view.Settings.Playlist,library:a.selection,editing:a.editing,menu:\x22video-playlist\x22,dragInfoText:f.videoPlaylistDragInfo,dragInfo:!1}),new wp.media.controller.CollectionAdd({type:\x22video\x22,collectionType:\x22playlist\x22,title:f.addToVideoPlaylistTitle})]),wp.media.view.settings.post.featuredImageId&&this.states.add(new wp.media.controller.FeaturedImage)},bindHandlers:function(){var a,b;d.prototype.bindHandlers.apply(this,arguments),this.on(\x22activate\x22,this.activate,this),b=_.find(this.counts,function(a){return 0===a.count}),\x22undefined\x22!=typeof b&&this.listenTo(wp.media.model.Attachments.all,\x22change:type\x22,this.mediaTypeCounts),this.on(\x22menu:create:gallery\x22,this.createMenu,this),this.on(\x22menu:create:playlist\x22,this.createMenu,this),this.on(\x22menu:create:video-playlist\x22,this.createMenu,this),this.on(\x22toolbar:create:main-insert\x22,this.createToolbar,this),this.on(\x22toolbar:create:main-gallery\x22,this.createToolbar,this),this.on(\x22toolbar:create:main-playlist\x22,this.createToolbar,this),this.on(\x22toolbar:create:main-video-playlist\x22,this.createToolbar,this),this.on(\x22toolbar:create:featured-image\x22,this.featuredImageToolbar,this),this.on(\x22toolbar:create:main-embed\x22,this.mainEmbedToolbar,this),a={menu:{\x22default\x22:\x22mainMenu\x22,gallery:\x22galleryMenu\x22,playlist:\x22playlistMenu\x22,\x22video-playlist\x22:\x22videoPlaylistMenu\x22},content:{embed:\x22embedContent\x22,\x22edit-image\x22:\x22editImageContent\x22,\x22edit-selection\x22:\x22editSelectionContent\x22},toolbar:{\x22main-insert\x22:\x22mainInsertToolbar\x22,\x22main-gallery\x22:\x22mainGalleryToolbar\x22,\x22gallery-edit\x22:\x22galleryEditToolbar\x22,\x22gallery-add\x22:\x22galleryAddToolbar\x22,\x22main-playlist\x22:\x22mainPlaylistToolbar\x22,\x22playlist-edit\x22:\x22playlistEditToolbar\x22,\x22playlist-add\x22:\x22playlistAddToolbar\x22,\x22main-video-playlist\x22:\x22mainVideoPlaylistToolbar\x22,\x22video-playlist-edit\x22:\x22videoPlaylistEditToolbar\x22,\x22video-playlist-add\x22:\x22videoPlaylistAddToolbar\x22}},_.each(a,function(a,b){_.each(a,function(a,c){this.on(b+\x22:render:\x22+c,this[a],this)},this)},this)},activate:function(){_.each(this.counts,function(a){a.count\x3c1&&this.menuItemVisibility(a.state,\x22hide\x22)},this)},mediaTypeCounts:function(a,b){\x22undefined\x22!=typeof this.counts[b]&&this.counts[b].count\x3c1&&(this.counts[b].count++,this.menuItemVisibility(this.counts[b].state,\x22show\x22))},mainMenu:function(a){a.set({\x22library-separator\x22:new wp.media.View({className:\x22separator\x22,priority:100})})},menuItemVisibility:function(a,b){var c=this.menu.get();\x22hide\x22===b?c.hide(a):\x22show\x22===b&&c.show(a)},galleryMenu:function(a){var b=this.lastState(),c=b&&b.id,d=this;a.set({cancel:{text:f.cancelGalleryTitle,priority:20,click:function(){c?d.setState(c):d.close(),this.controller.modal.focusManager.focus()}},separateCancel:new wp.media.View({className:\x22separator\x22,priority:40})})},playlistMenu:function(a){var b=this.lastState(),c=b&&b.id,d=this;a.set({cancel:{text:f.cancelPlaylistTitle,priority:20,click:function(){c?d.setState(c):d.close()}},separateCancel:new wp.media.View({className:\x22separator\x22,priority:40})})},videoPlaylistMenu:function(a){var b=this.lastState(),c=b&&b.id,d=this;a.set({cancel:{text:f.cancelVideoPlaylistTitle,priority:20,click:function(){c?d.setState(c):d.close()}},separateCancel:new wp.media.View({className:\x22separator\x22,priority:40})})},embedContent:function(){var a=new wp.media.view.Embed({controller:this,model:this.state()}).render();this.content.set(a),wp.media.isTouchDevice||a.url.focus()},editSelectionContent:function(){var a,b=this.state(),c=b.get(\x22selection\x22);a=new wp.media.view.AttachmentsBrowser({controller:this,collection:c,selection:c,model:b,sortable:!0,search:!1,date:!1,dragInfo:!0,AttachmentView:wp.media.view.Attachments.EditSelection}).render(),a.toolbar.set(\x22backToLibrary\x22,{text:f.returnToLibrary,priority:-100,click:function(){this.controller.content.mode(\x22browse\x22)}}),this.content.set(a),this.trigger(\x22edit:selection\x22,this)},editImageContent:function(){var a=this.state().get(\x22image\x22),b=new wp.media.view.EditImage({model:a,controller:this}).render();this.content.set(b),b.loadEditor()},selectionStatusToolbar:function(a){var b=this.state().get(\x22editable\x22);a.set(\x22selection\x22,new wp.media.view.Selection({controller:this,collection:this.state().get(\x22selection\x22),priority:-40,editable:b&&function(){this.controller.content.mode(\x22edit-selection\x22)}}).render())},mainInsertToolbar:function(a){var b=this;this.selectionStatusToolbar(a),a.set(\x22insert\x22,{style:\x22primary\x22,priority:80,text:f.insertIntoPost,requires:{selection:!0},click:function(){var a=b.state(),c=a.get(\x22selection\x22);b.close(),a.trigger(\x22insert\x22,c).reset()}})},mainGalleryToolbar:function(a){var b=this;this.selectionStatusToolbar(a),a.set(\x22gallery\x22,{style:\x22primary\x22,text:f.createNewGallery,priority:60,requires:{selection:!0},click:function(){var a=b.state().get(\x22selection\x22),c=b.state(\x22gallery-edit\x22),d=a.where({type:\x22image\x22});c.set(\x22library\x22,new wp.media.model.Selection(d,{props:a.props.toJSON(),multiple:!0})),this.controller.setState(\x22gallery-edit\x22),this.controller.modal.focusManager.focus()}})},mainPlaylistToolbar:function(a){var b=this;this.selectionStatusToolbar(a),a.set(\x22playlist\x22,{style:\x22primary\x22,text:f.createNewPlaylist,priority:100,requires:{selection:!0},click:function(){var a=b.state().get(\x22selection\x22),c=b.state(\x22playlist-edit\x22),d=a.where({type:\x22audio\x22});c.set(\x22library\x22,new wp.media.model.Selection(d,{props:a.props.toJSON(),multiple:!0})),this.controller.setState(\x22playlist-edit\x22),this.controller.modal.focusManager.focus()}})},mainVideoPlaylistToolbar:function(a){var b=this;this.selectionStatusToolbar(a),a.set(\x22video-playlist\x22,{style:\x22primary\x22,text:f.createNewVideoPlaylist,priority:100,requires:{selection:!0},click:function(){var a=b.state().get(\x22selection\x22),c=b.state(\x22video-playlist-edit\x22),d=a.where({type:\x22video\x22});c.set(\x22library\x22,new wp.media.model.Selection(d,{props:a.props.toJSON(),multiple:!0})),this.controller.setState(\x22video-playlist-edit\x22),this.controller.modal.focusManager.focus()}})},featuredImageToolbar:function(a){this.createSelectToolbar(a,{text:f.setFeaturedImage,state:this.options.state})},mainEmbedToolbar:function(a){a.view=new wp.media.view.Toolbar.Embed({controller:this})},galleryEditToolbar:function(){var a=this.state().get(\x22editing\x22);this.toolbar.set(new wp.media.view.Toolbar({controller:this,items:{insert:{style:\x22primary\x22,text:a?f.updateGallery:f.insertGallery,priority:80,requires:{library:!0},click:function(){var a=this.controller,b=a.state();a.close(),b.trigger(\x22update\x22,b.get(\x22library\x22)),a.setState(a.options.state),a.reset()}}}}))},galleryAddToolbar:function(){this.toolbar.set(new wp.media.view.Toolbar({controller:this,items:{insert:{style:\x22primary\x22,text:f.addToGallery,priority:80,requires:{selection:!0},click:function(){var a=this.controller,b=a.state(),c=a.state(\x22gallery-edit\x22);c.get(\x22library\x22).add(b.get(\x22selection\x22).models),b.trigger(\x22reset\x22),a.setState(\x22gallery-edit\x22)}}}}))},playlistEditToolbar:function(){var a=this.state().get(\x22editing\x22);this.toolbar.set(new wp.media.view.Toolbar({controller:this,items:{insert:{style:\x22primary\x22,text:a?f.updatePlaylist:f.insertPlaylist,priority:80,requires:{library:!0},click:function(){var a=this.controller,b=a.state();a.close(),b.trigger(\x22update\x22,b.get(\x22library\x22)),a.setState(a.options.state),a.reset()}}}}))},playlistAddToolbar:function(){this.toolbar.set(new wp.media.view.Toolbar({controller:this,items:{insert:{style:\x22primary\x22,text:f.addToPlaylist,priority:80,requires:{selection:!0},click:function(){var a=this.controller,b=a.state(),c=a.state(\x22playlist-edit\x22);c.get(\x22library\x22).add(b.get(\x22selection\x22).models),b.trigger(\x22reset\x22),a.setState(\x22playlist-edit\x22)}}}}))},videoPlaylistEditToolbar:function(){var a=this.state().get(\x22editing\x22);this.toolbar.set(new wp.media.view.Toolbar({controller:this,items:{insert:{style:\x22primary\x22,text:a?f.updateVideoPlaylist:f.insertVideoPlaylist,priority:140,requires:{library:!0},click:function(){var a=this.controller,b=a.state(),c=b.get(\x22library\x22);c.type=\x22video\x22,a.close(),b.trigger(\x22update\x22,c),a.setState(a.options.state),a.reset()}}}}))},videoPlaylistAddToolbar:function(){this.toolbar.set(new wp.media.view.Toolbar({controller:this,items:{insert:{style:\x22primary\x22,text:f.addToVideoPlaylist,priority:140,requires:{selection:!0},click:function(){var a=this.controller,b=a.state(),c=a.state(\x22video-playlist-edit\x22);c.get(\x22library\x22).add(b.get(\x22selection\x22).models),b.trigger(\x22reset\x22),a.setState(\x22video-playlist-edit\x22)}}}}))}}),a.exports=c},function(a,b){var c,d=wp.media.view.MediaFrame.Select,e=wp.media.view.l10n;c=d.extend({defaults:{id:\x22image\x22,url:\x22\x22,menu:\x22image-details\x22,content:\x22image-details\x22,toolbar:\x22image-details\x22,type:\x22link\x22,title:e.imageDetailsTitle,priority:120},initialize:function(a){this.image=new wp.media.model.PostImage(a.metadata),this.options.selection=new wp.media.model.Selection(this.image.attachment,{multiple:!1}),d.prototype.initialize.apply(this,arguments)},bindHandlers:function(){d.prototype.bindHandlers.apply(this,arguments),this.on(\x22menu:create:image-details\x22,this.createMenu,this),this.on(\x22content:create:image-details\x22,this.imageDetailsContent,this),this.on(\x22content:render:edit-image\x22,this.editImageContent,this),this.on(\x22toolbar:render:image-details\x22,this.renderImageDetailsToolbar,this),this.on(\x22toolbar:render:replace\x22,this.renderReplaceImageToolbar,this)},createStates:function(){this.states.add([new wp.media.controller.ImageDetails({image:this.image,editable:!1}),new wp.media.controller.ReplaceImage({id:\x22replace-image\x22,library:wp.media.query({type:\x22image\x22}),image:this.image,multiple:!1,title:e.imageReplaceTitle,toolbar:\x22replace\x22,priority:80,displaySettings:!0}),new wp.media.controller.EditImage({image:this.image,selection:this.options.selection})])},imageDetailsContent:function(a){a.view=new wp.media.view.ImageDetails({controller:this,model:this.state().image,attachment:this.state().image.attachment})},editImageContent:function(){var a,b=this.state(),c=b.get(\x22image\x22);c&&(a=new wp.media.view.EditImage({model:c,controller:this}).render(),this.content.set(a),a.loadEditor())},renderImageDetailsToolbar:function(){this.toolbar.set(new wp.media.view.Toolbar({controller:this,items:{select:{style:\x22primary\x22,text:e.update,priority:80,click:function(){var a=this.controller,b=a.state();a.close(),b.trigger(\x22update\x22,a.image.toJSON()),a.setState(a.options.state),a.reset()}}}}))},renderReplaceImageToolbar:function(){var a=this,b=a.lastState(),c=b&&b.id;this.toolbar.set(new wp.media.view.Toolbar({controller:this,items:{back:{text:e.back,priority:20,click:function(){c?a.setState(c):a.close()}},replace:{style:\x22primary\x22,text:e.replace,priority:80,requires:{selection:!0},click:function(){var a=this.controller,b=a.state(),c=b.get(\x22selection\x22),d=c.single();a.close(),a.image.changeAttachment(d,b.display(d)),b.trigger(\x22replace\x22,a.image.toJSON()),a.setState(a.options.state),a.reset()}}}}))}}),a.exports=c},function(a,b){var c,d=jQuery;c=wp.media.View.extend({tagName:\x22div\x22,template:wp.template(\x22media-modal\x22),events:{\x22click .media-modal-backdrop, .media-modal-close\x22:\x22escapeHandler\x22,keydown:\x22keydown\x22},clickedOpenerEl:null,initialize:function(){_.defaults(this.options,{container:document.body,title:\x22\x22,propagate:!0,hasCloseButton:!0}),this.focusManager=new wp.media.view.FocusManager({el:this.el})},prepare:function(){return{title:this.options.title,hasCloseButton:this.options.hasCloseButton}},attach:function(){return this.views.attached?this:(this.views.rendered||this.render(),this.$el.appendTo(this.options.container),this.views.attached=!0,this.views.ready(),this.propagate(\x22attach\x22))},detach:function(){return this.$el.is(\x22:visible\x22)&&this.close(),this.$el.detach(),this.views.attached=!1,this.propagate(\x22detach\x22)},open:function(){var a,b=this.$el;return b.is(\x22:visible\x22)?this:(this.clickedOpenerEl=document.activeElement,this.views.attached||this.attach(),d(\x22body\x22).addClass(\x22modal-open\x22),b.show(),\x22ontouchend\x22in document&&(a=window.tinymce&&window.tinymce.activeEditor)&&!a.isHidden()&&a.iframeElement&&(a.iframeElement.focus(),a.iframeElement.blur(),setTimeout(function(){a.iframeElement.blur()},100)),this.$(\x22.media-modal\x22).focus(),this.focusManager.setAriaHiddenOnBodyChildren(b),this.propagate(\x22open\x22))},close:function(a){return this.views.attached&&this.$el.is(\x22:visible\x22)?(d(\x22body\x22).removeClass(\x22modal-open\x22),this.$el.hide().undelegate(\x22keydown\x22),this.focusManager.removeAriaHiddenFromBodyChildren(),null!==this.clickedOpenerEl?this.clickedOpenerEl.focus():d(\x22#wpbody-content\x22).attr(\x22tabindex\x22,\x22-1\x22).focus(),this.propagate(\x22close\x22),a&&a.escape&&this.propagate(\x22escape\x22),this):this},escape:function(){return this.close({escape:!0})},escapeHandler:function(a){a.preventDefault(),this.escape()},content:function(a){return this.views.set(\x22.media-modal-content\x22,a),this},propagate:function(a){return this.trigger(a),this.options.propagate&&this.controller.trigger(a),this},keydown:function(a){27===a.which&&this.$el.is(\x22:visible\x22)&&(this.escape(),a.stopImmediatePropagation())}}),a.exports=c},function(a,b){var c=wp.media.View.extend({events:{keydown:\x22constrainTabbing\x22},focus:function(){this.$(\x22.media-menu-item\x22).filter(\x22:visible\x22).first().focus()},constrainTabbing:function(a){var b;if(9===a.keyCode)return b=this.$(\x22:tabbable\x22).not(\x27.moxie-shim input[type=\x22file\x22]\x27),b.last()[0]!==a.target||a.shiftKey?b.first()[0]===a.target&&a.shiftKey?(b.last().focus(),!1):void 0:(b.first().focus(),!1)},setAriaHiddenOnBodyChildren:function(a){var b,c=this;this.isBodyAriaHidden||(b=document.body.children,_.each(b,function(b){b!==a[0]&&c.elementShouldBeHidden(b)&&(b.setAttribute(\x22aria-hidden\x22,\x22true\x22),c.ariaHiddenElements.push(b))}),this.isBodyAriaHidden=!0)},removeAriaHiddenFromBodyChildren:function(){_.each(this.ariaHiddenElements,function(a){a.removeAttribute(\x22aria-hidden\x22)}),this.ariaHiddenElements=[],this.isBodyAriaHidden=!1},elementShouldBeHidden:function(a){var b=a.getAttribute(\x22role\x22),c=[\x22alert\x22,\x22status\x22,\x22log\x22,\x22marquee\x22,\x22timer\x22];return!(\x22SCRIPT\x22===a.tagName||a.hasAttribute(\x22aria-hidden\x22)||a.hasAttribute(\x22aria-live\x22)||c.indexOf(b)!==-1)},isBodyAriaHidden:!1,ariaHiddenElements:[]});a.exports=c},function(a,b){var c,d=jQuery;c=wp.media.View.extend({tagName:\x22div\x22,className:\x22uploader-window\x22,template:wp.template(\x22uploader-window\x22),initialize:function(){var a;this.$browser=d(\x27\x3cbutton type=\x22button\x22 class=\x22browser\x22 /\x3e\x27).hide().appendTo(\x22body\x22),a=this.options.uploader=_.defaults(this.options.uploader||{},{dropzone:this.$el,browser:this.$browser,params:{}}),!a.dropzone||a.dropzone instanceof d||(a.dropzone=d(a.dropzone)),this.controller.on(\x22activate\x22,this.refresh,this),this.controller.on(\x22detach\x22,function(){this.$browser.remove()},this)},refresh:function(){this.uploader&&this.uploader.refresh()},ready:function(){var a,b=wp.media.view.settings.post.id;this.uploader||(b&&(this.options.uploader.params.post_id=b),this.uploader=new wp.Uploader(this.options.uploader),a=this.uploader.dropzone,a.on(\x22dropzone:enter\x22,_.bind(this.show,this)),a.on(\x22dropzone:leave\x22,_.bind(this.hide,this)),d(this.uploader).on(\x22uploader:ready\x22,_.bind(this._ready,this)))},_ready:function(){this.controller.trigger(\x22uploader:ready\x22)},show:function(){var a=this.$el.show();_.defer(function(){a.css({opacity:1})})},hide:function(){var a=this.$el.css({opacity:0});wp.media.transition(a).done(function(){\x220\x22===a.css(\x22opacity\x22)&&a.hide()}),_.delay(function(){\x220\x22===a.css(\x22opacity\x22)&&a.is(\x22:visible\x22)&&a.hide()},500)}}),a.exports=c},function(a,b){var c,d=wp.media.View,e=wp.media.view.l10n,f=jQuery;c=d.extend({tagName:\x22div\x22,className:\x22uploader-editor\x22,template:wp.template(\x22uploader-editor\x22),localDrag:!1,overContainer:!1,overDropzone:!1,draggingFile:null,initialize:function(){return this.initialized=!1,window.tinyMCEPreInit&&window.tinyMCEPreInit.dragDropUpload&&this.browserSupport()?(this.$document=f(document),this.dropzones=[],this.files=[],this.$document.on(\x22drop\x22,\x22.uploader-editor\x22,_.bind(this.drop,this)),this.$document.on(\x22dragover\x22,\x22.uploader-editor\x22,_.bind(this.dropzoneDragover,this)),this.$document.on(\x22dragleave\x22,\x22.uploader-editor\x22,_.bind(this.dropzoneDragleave,this)),this.$document.on(\x22click\x22,\x22.uploader-editor\x22,_.bind(this.click,this)),this.$document.on(\x22dragover\x22,_.bind(this.containerDragover,this)),this.$document.on(\x22dragleave\x22,_.bind(this.containerDragleave,this)),this.$document.on(\x22dragstart dragend drop\x22,_.bind(function(a){this.localDrag=\x22dragstart\x22===a.type,\x22drop\x22===a.type&&this.containerDragleave()},this)),this.initialized=!0,this):this},browserSupport:function(){var a=!1,b=document.createElement(\x22div\x22);return a=\x22draggable\x22in b||\x22ondragstart\x22in b&&\x22ondrop\x22in b,a=a&&!!(window.File&&window.FileList&&window.FileReader)},isDraggingFile:function(a){return null!==this.draggingFile?this.draggingFile:!_.isUndefined(a.originalEvent)&&!_.isUndefined(a.originalEvent.dataTransfer)&&(this.draggingFile=_.indexOf(a.originalEvent.dataTransfer.types,\x22Files\x22)\x3e-1&&_.indexOf(a.originalEvent.dataTransfer.types,\x22text/plain\x22)===-1,this.draggingFile)},refresh:function(a){var b;for(b in this.dropzones)this.dropzones[b].toggle(this.overContainer||this.overDropzone);return _.isUndefined(a)||f(a.target).closest(\x22.uploader-editor\x22).toggleClass(\x22droppable\x22,this.overDropzone),this.overContainer||this.overDropzone||(this.draggingFile=null),this},render:function(){return this.initialized?(d.prototype.render.apply(this,arguments),f(\x22.wp-editor-wrap\x22).each(_.bind(this.attach,this)),this):this},attach:function(a,b){var c=this.$el.clone();return this.dropzones.push(c),f(b).append(c),this},drop:function(a){var b,c;if(this.containerDragleave(a),this.dropzoneDragleave(a),this.files=a.originalEvent.dataTransfer.files,!(this.files.length\x3c1))return b=f(a.target).parents(\x22.wp-editor-wrap\x22),b.length\x3e0&&b[0].id&&(window.wpActiveEditor=b[0].id.slice(3,-5)),this.workflow?(this.workflow.state().reset(),this.addFiles.apply(this),this.workflow.open()):(this.workflow=wp.media.editor.open(window.wpActiveEditor,{frame:\x22post\x22,state:\x22insert\x22,title:e.addMedia,multiple:!0}),c=this.workflow.uploader,c.uploader&&c.uploader.ready?this.addFiles.apply(this):this.workflow.on(\x22uploader:ready\x22,this.addFiles,this)),!1},addFiles:function(){return this.files.length&&(this.workflow.uploader.uploader.uploader.addFile(_.toArray(this.files)),this.files=[]),this},containerDragover:function(a){!this.localDrag&&this.isDraggingFile(a)&&(this.overContainer=!0,this.refresh())},containerDragleave:function(){this.overContainer=!1,_.delay(_.bind(this.refresh,this),50)},dropzoneDragover:function(a){if(!this.localDrag&&this.isDraggingFile(a))return this.overDropzone=!0,this.refresh(a),!1},dropzoneDragleave:function(a){this.overDropzone=!1,_.delay(_.bind(this.refresh,this,a),50)},click:function(a){this.containerDragleave(a),this.dropzoneDragleave(a),this.localDrag=!1}}),a.exports=c},function(a,b){var c,d=wp.media.View;c=d.extend({tagName:\x22div\x22,className:\x22uploader-inline\x22,template:wp.template(\x22uploader-inline\x22),events:{\x22click .close\x22:\x22hide\x22},initialize:function(){_.defaults(this.options,{message:\x22\x22,status:!0,canClose:!1}),!this.options.$browser&&this.controller.uploader&&(this.options.$browser=this.controller.uploader.$browser),_.isUndefined(this.options.postId)&&(this.options.postId=wp.media.view.settings.post.id),this.options.status&&this.views.set(\x22.upload-inline-status\x22,new wp.media.view.UploaderStatus({controller:this.controller}))},prepare:function(){var a=this.controller.state().get(\x22suggestedWidth\x22),b=this.controller.state().get(\x22suggestedHeight\x22),c={};return c.message=this.options.message,c.canClose=this.options.canClose,a&&b&&(c.suggestedWidth=a,c.suggestedHeight=b),c},dispose:function(){return this.disposing?d.prototype.dispose.apply(this,arguments):(this.disposing=!0,this.remove())},remove:function(){var a=d.prototype.remove.apply(this,arguments);return _.defer(_.bind(this.refresh,this)),a},refresh:function(){var a=this.controller.uploader;a&&a.refresh()},ready:function(){var a,b=this.options.$browser;if(this.controller.uploader){if(a=this.$(\x22.browser\x22),a[0]===b[0])return;b.detach().text(a.text()),b[0].className=a[0].className,a.replaceWith(b.show())}return this.refresh(),this},show:function(){this.$el.removeClass(\x22hidden\x22),this.controller.$uploaderToggler&&this.controller.$uploaderToggler.length&&this.controller.$uploaderToggler.attr(\x22aria-expanded\x22,\x22true\x22)},hide:function(){this.$el.addClass(\x22hidden\x22),this.controller.$uploaderToggler&&this.controller.$uploaderToggler.length&&this.controller.$uploaderToggler.attr(\x22aria-expanded\x22,\x22false\x22).focus()}}),a.exports=c},function(a,b){var c,d=wp.media.View;c=d.extend({className:\x22media-uploader-status\x22,template:wp.template(\x22uploader-status\x22),events:{\x22click .upload-dismiss-errors\x22:\x22dismiss\x22},initialize:function(){this.queue=wp.Uploader.queue,this.queue.on(\x22add remove reset\x22,this.visibility,this),this.queue.on(\x22add remove reset change:percent\x22,this.progress,this),this.queue.on(\x22add remove reset change:uploading\x22,this.info,this),this.errors=wp.Uploader.errors,this.errors.reset(),this.errors.on(\x22add remove reset\x22,this.visibility,this),this.errors.on(\x22add\x22,this.error,this)},dispose:function(){return wp.Uploader.queue.off(null,null,this),d.prototype.dispose.apply(this,arguments),this},visibility:function(){this.$el.toggleClass(\x22uploading\x22,!!this.queue.length),this.$el.toggleClass(\x22errors\x22,!!this.errors.length),this.$el.toggle(!!this.queue.length||!!this.errors.length)},ready:function(){_.each({$bar:\x22.media-progress-bar div\x22,$index:\x22.upload-index\x22,$total:\x22.upload-total\x22,$filename:\x22.upload-filename\x22},function(a,b){this[b]=this.$(a)},this),this.visibility(),this.progress(),this.info()},progress:function(){var a=this.queue,b=this.$bar;b&&a.length&&b.width(a.reduce(function(a,b){if(!b.get(\x22uploading\x22))return a+100;var c=b.get(\x22percent\x22);return a+(_.isNumber(c)?c:100)},0)/a.length+\x22%\x22)},info:function(){var a,b=this.queue,c=0;b.length&&(a=this.queue.find(function(a,b){return c=b,a.get(\x22uploading\x22)}),this.$index.text(c+1),this.$total.text(b.length),this.$filename.html(a?this.filename(a.get(\x22filename\x22)):\x22\x22))},filename:function(a){return _.escape(a)},error:function(a){this.views.add(\x22.upload-errors\x22,new wp.media.view.UploaderStatusError({filename:this.filename(a.get(\x22file\x22).name),message:a.get(\x22message\x22)}),{at:0})},dismiss:function(){var a=this.views.get(\x22.upload-errors\x22);a&&_.invoke(a,\x22remove\x22),wp.Uploader.errors.reset(),this.controller.modal.focusManager.focus()}}),a.exports=c},function(a,b){var c=wp.media.View.extend({className:\x22upload-error\x22,template:wp.template(\x22uploader-status-error\x22)});a.exports=c},function(a,b){var c,d=wp.media.View;c=d.extend({tagName:\x22div\x22,className:\x22media-toolbar\x22,initialize:function(){var a=this.controller.state(),b=this.selection=a.get(\x22selection\x22),c=this.library=a.get(\x22library\x22);this._views={},this.primary=new wp.media.view.PriorityList,this.secondary=new wp.media.view.PriorityList,this.primary.$el.addClass(\x22media-toolbar-primary search-form\x22),this.secondary.$el.addClass(\x22media-toolbar-secondary\x22),this.views.set([this.secondary,this.primary]),this.options.items&&this.set(this.options.items,{silent:!0}),this.options.silent||this.render(),b&&b.on(\x22add remove reset\x22,this.refresh,this),c&&c.on(\x22add remove reset\x22,this.refresh,this)},dispose:function(){return this.selection&&this.selection.off(null,null,this),this.library&&this.library.off(null,null,this),d.prototype.dispose.apply(this,arguments)},ready:function(){this.refresh()},set:function(a,b,c){var d;return c=c||{},_.isObject(a)?_.each(a,function(a,b){this.set(b,a,{silent:!0})},this):(b instanceof Backbone.View||(b.classes=[\x22media-button-\x22+a].concat(b.classes||[]),b=new wp.media.view.Button(b).render()),b.controller=b.controller||this.controller,this._views[a]=b,d=b.options.priority\x3c0?\x22secondary\x22:\x22primary\x22,this[d].set(a,b,c)),c.silent||this.refresh(),this},get:function(a){return this._views[a]},unset:function(a,b){return delete this._views[a],this.primary.unset(a,b),this.secondary.unset(a,b),b&&b.silent||this.refresh(),this},refresh:function(){var a=this.controller.state(),b=a.get(\x22library\x22),c=a.get(\x22selection\x22);_.each(this._views,function(a){if(a.model&&a.options&&a.options.requires){var d=a.options.requires,e=!1;c&&c.models&&(e=_.some(c.models,function(a){return a.get(\x22uploading\x22)===!0})),d.selection&&c&&!c.length?e=!0:d.library&&b&&!b.length&&(e=!0),a.model.set(\x22disabled\x22,e)}})}}),a.exports=c},function(a,b){var c,d=wp.media.view.Toolbar,e=wp.media.view.l10n;c=d.extend({initialize:function(){var a=this.options;_.bindAll(this,\x22clickSelect\x22),_.defaults(a,{event:\x22select\x22,state:!1,reset:!0,close:!0,text:e.select,requires:{selection:!0}}),a.items=_.defaults(a.items||{},{select:{style:\x22primary\x22,text:a.text,priority:80,click:this.clickSelect,requires:a.requires}}),d.prototype.initialize.apply(this,arguments)},clickSelect:function(){var a=this.options,b=this.controller;a.close&&b.close(),a.event&&b.state().trigger(a.event),a.state&&b.setState(a.state),a.reset&&b.reset()}}),a.exports=c},function(a,b){var c,d=wp.media.view.Toolbar.Select,e=wp.media.view.l10n;c=d.extend({initialize:function(){_.defaults(this.options,{text:e.insertIntoPost,requires:!1}),d.prototype.initialize.apply(this,arguments)},refresh:function(){var a=this.controller.state().props.get(\x22url\x22);this.get(\x22select\x22).model.set(\x22disabled\x22,!a||\x22http://\x22===a),d.prototype.refresh.apply(this,arguments)}}),a.exports=c},function(a,b){var c=wp.media.View.extend({tagName:\x22button\x22,className:\x22media-button\x22,attributes:{type:\x22button\x22},events:{click:\x22click\x22},defaults:{text:\x22\x22,style:\x22\x22,size:\x22large\x22,disabled:!1},initialize:function(){this.model=new Backbone.Model(this.defaults),_.each(this.defaults,function(a,b){var c=this.options[b];_.isUndefined(c)||(this.model.set(b,c),delete this.options[b])},this),this.listenTo(this.model,\x22change\x22,this.render)},render:function(){var a=[\x22button\x22,this.className],b=this.model.toJSON();return b.style&&a.push(\x22button-\x22+b.style),b.size&&a.push(\x22button-\x22+b.size),a=_.uniq(a.concat(this.options.classes)),this.el.className=a.join(\x22 \x22),this.$el.attr(\x22disabled\x22,b.disabled),this.$el.text(this.model.get(\x22text\x22)),this},click:function(a){\x22#\x22===this.attributes.href&&a.preventDefault(),this.options.click&&!this.model.get(\x22disabled\x22)&&this.options.click.apply(this,arguments)}});a.exports=c},function(a,b){var c,d=Backbone.$;c=wp.media.View.extend({tagName:\x22div\x22,className:\x22button-group button-large media-button-group\x22,initialize:function(){this.buttons=_.map(this.options.buttons||[],function(a){return a instanceof Backbone.View?a:new wp.media.view.Button(a).render()}),delete this.options.buttons,this.options.classes&&this.$el.addClass(this.options.classes)},render:function(){return this.$el.html(d(_.pluck(this.buttons,\x22el\x22)).detach()),this}}),a.exports=c},function(a,b){var c=wp.media.View.extend({tagName:\x22div\x22,initialize:function(){this._views={},this.set(_.extend({},this._views,this.options.views),{silent:!0}),delete this.options.views,this.options.silent||this.render()},set:function(a,b,c){var d,e,f;return c=c||{},_.isObject(a)?(_.each(a,function(a,b){this.set(b,a)},this),this):(b instanceof Backbone.View||(b=this.toView(b,a,c)),b.controller=b.controller||this.controller,this.unset(a),d=b.options.priority||10,e=this.views.get()||[],_.find(e,function(a,b){if(a.options.priority\x3ed)return f=b,!0}),this._views[a]=b,this.views.add(b,{at:_.isNumber(f)?f:e.length||0}),this)},get:function(a){return this._views[a]},unset:function(a){var b=this.get(a);return b&&b.remove(),delete this._views[a],this},toView:function(a){return new wp.media.View(a)}});a.exports=c},function(a,b){var c,d=jQuery;c=wp.media.View.extend({tagName:\x22a\x22,className:\x22media-menu-item\x22,attributes:{href:\x22#\x22},events:{click:\x22_click\x22},_click:function(a){var b=this.options.click;a&&a.preventDefault(),b?b.call(this):this.click(),wp.media.isTouchDevice||d(\x22.media-frame-content input\x22).first().focus()},click:function(){var a=this.options.state;a&&(this.controller.setState(a),this.views.parent.$el.removeClass(\x22visible\x22))},render:function(){var a=this.options;return a.text?this.$el.text(a.text):a.html&&this.$el.html(a.html),this}}),a.exports=c},function(a,b){var c,d=wp.media.view.MenuItem,e=wp.media.view.PriorityList;c=e.extend({tagName:\x22div\x22,className:\x22media-menu\x22,property:\x22state\x22,ItemView:d,region:\x22menu\x22,toView:function(a,b){return a=a||{},a[this.property]=a[this.property]||b,new this.ItemView(a).render()},ready:function(){e.prototype.ready.apply(this,arguments),this.visibility()},set:function(){e.prototype.set.apply(this,arguments),this.visibility()},unset:function(){e.prototype.unset.apply(this,arguments),this.visibility()},visibility:function(){var a=this.region,b=this.controller[a].get(),c=this.views.get(),d=!c||c.length\x3c2;this===b&&this.controller.$el.toggleClass(\x22hide-\x22+a,d)},select:function(a){var b=this.get(a);b&&(this.deselect(),b.$el.addClass(\x22active\x22))},deselect:function(){this.$el.children().removeClass(\x22active\x22)},hide:function(a){var b=this.get(a);b&&b.$el.addClass(\x22hidden\x22)},show:function(a){var b=this.get(a);b&&b.$el.removeClass(\x22hidden\x22)}}),a.exports=c},function(a,b){var c=wp.media.view.MenuItem.extend({click:function(){var a=this.options.contentMode;a&&this.controller.content.mode(a)}});a.exports=c},function(a,b){var c,d=wp.media.view.Menu;c=d.extend({tagName:\x22div\x22,className:\x22media-router\x22,property:\x22contentMode\x22,ItemView:wp.media.view.RouterItem,region:\x22router\x22,initialize:function(){this.controller.on(\x22content:render\x22,this.update,this),d.prototype.initialize.apply(this,arguments)},update:function(){var a=this.controller.content.mode();a&&this.select(a)}}),a.exports=c},function(a,b){var c=wp.media.view.PriorityList.extend({className:\x22media-sidebar\x22});a.exports=c},function(a,b){var c,d=wp.media.View,e=jQuery;c=d.extend({tagName:\x22li\x22,className:\x22attachment\x22,template:wp.template(\x22attachment\x22),attributes:function(){return{tabIndex:0,role:\x22checkbox\x22,\x22aria-label\x22:this.model.get(\x22title\x22),\x22aria-checked\x22:!1,\x22data-id\x22:this.model.get(\x22id\x22)}},events:{click:\x22toggleSelectionHandler\x22,\x22change [data-setting]\x22:\x22updateSetting\x22,\x22change [data-setting] input\x22:\x22updateSetting\x22,\x22change [data-setting] select\x22:\x22updateSetting\x22,\x22change [data-setting] textarea\x22:\x22updateSetting\x22,\x22click .attachment-close\x22:\x22removeFromLibrary\x22,\x22click .check\x22:\x22checkClickHandler\x22,keydown:\x22toggleSelectionHandler\x22},buttons:{},initialize:function(){var a=this.options.selection,b=_.defaults(this.options,{rerenderOnModelChange:!0});b.rerenderOnModelChange?this.listenTo(this.model,\x22change\x22,this.render):this.listenTo(this.model,\x22change:percent\x22,this.progress),this.listenTo(this.model,\x22change:title\x22,this._syncTitle),this.listenTo(this.model,\x22change:caption\x22,this._syncCaption),this.listenTo(this.model,\x22change:artist\x22,this._syncArtist),this.listenTo(this.model,\x22change:album\x22,this._syncAlbum),this.listenTo(this.model,\x22add\x22,this.select),this.listenTo(this.model,\x22remove\x22,this.deselect),a&&(a.on(\x22reset\x22,this.updateSelect,this),this.listenTo(this.model,\x22selection:single selection:unsingle\x22,this.details),this.details(this.model,this.controller.state().get(\x22selection\x22))),this.listenTo(this.controller,\x22attachment:compat:waiting attachment:compat:ready\x22,this.updateSave)},dispose:function(){var a=this.options.selection;return this.updateAll(),a&&a.off(null,null,this),d.prototype.dispose.apply(this,arguments),this},render:function(){var a=_.defaults(this.model.toJSON(),{orientation:\x22landscape\x22,uploading:!1,type:\x22\x22,subtype:\x22\x22,icon:\x22\x22,filename:\x22\x22,caption:\x22\x22,title:\x22\x22,dateFormatted:\x22\x22,width:\x22\x22,height:\x22\x22,compat:!1,alt:\x22\x22,description:\x22\x22},this.options);return a.buttons=this.buttons,a.describe=this.controller.state().get(\x22describe\x22),\x22image\x22===a.type&&(a.size=this.imageSize()),\x0aa.can={},a.nonces&&(a.can.remove=!!a.nonces[\x22delete\x22],a.can.save=!!a.nonces.update),this.controller.state().get(\x22allowLocalEdits\x22)&&(a.allowLocalEdits=!0),a.uploading&&!a.percent&&(a.percent=0),this.views.detach(),this.$el.html(this.template(a)),this.$el.toggleClass(\x22uploading\x22,a.uploading),a.uploading?this.$bar=this.$(\x22.media-progress-bar div\x22):delete this.$bar,this.updateSelect(),this.updateSave(),this.views.render(),this},progress:function(){this.$bar&&this.$bar.length&&this.$bar.width(this.model.get(\x22percent\x22)+\x22%\x22)},toggleSelectionHandler:function(a){var b;if(\x22INPUT\x22!==a.target.nodeName&&\x22BUTTON\x22!==a.target.nodeName){if(37===a.keyCode||38===a.keyCode||39===a.keyCode||40===a.keyCode)return void this.controller.trigger(\x22attachment:keydown:arrow\x22,a);if(\x22keydown\x22!==a.type||13===a.keyCode||32===a.keyCode){if(a.preventDefault(),this.controller.isModeActive(\x22grid\x22)){if(this.controller.isModeActive(\x22edit\x22))return void this.controller.trigger(\x22edit:attachment\x22,this.model,a.currentTarget);this.controller.isModeActive(\x22select\x22)&&(b=\x22toggle\x22)}a.shiftKey?b=\x22between\x22:(a.ctrlKey||a.metaKey)&&(b=\x22toggle\x22),this.toggleSelection({method:b}),this.controller.trigger(\x22selection:toggle\x22)}}},toggleSelection:function(a){var b,c,d,e,f=this.collection,g=this.options.selection,h=this.model,i=a&&a.method;if(g){if(b=g.single(),i=_.isUndefined(i)?g.multiple:i,\x22between\x22===i&&b&&g.multiple){if(b===h)return;return d=f.indexOf(b),e=f.indexOf(this.model),c=d\x3ce?f.models.slice(d,e+1):f.models.slice(e,d+1),g.add(c),void g.single(h)}if(\x22toggle\x22===i)return g[this.selected()?\x22remove\x22:\x22add\x22](h),void g.single(h);if(\x22add\x22===i)return g.add(h),void g.single(h);i||(i=\x22add\x22),\x22add\x22!==i&&(i=\x22reset\x22),this.selected()?g[b===h?\x22remove\x22:\x22single\x22](h):(g[i](h),g.single(h))}},updateSelect:function(){this[this.selected()?\x22select\x22:\x22deselect\x22]()},selected:function(){var a=this.options.selection;if(a)return!!a.get(this.model.cid)},select:function(a,b){var c=this.options.selection,d=this.controller;!c||b&&b!==c||this.$el.hasClass(\x22selected\x22)||(this.$el.addClass(\x22selected\x22).attr(\x22aria-checked\x22,!0),d.isModeActive(\x22grid\x22)&&d.isModeActive(\x22select\x22)||this.$(\x22.check\x22).attr(\x22tabindex\x22,\x220\x22))},deselect:function(a,b){var c=this.options.selection;!c||b&&b!==c||this.$el.removeClass(\x22selected\x22).attr(\x22aria-checked\x22,!1).find(\x22.check\x22).attr(\x22tabindex\x22,\x22-1\x22)},details:function(a,b){var c,d=this.options.selection;d===b&&(c=d.single(),this.$el.toggleClass(\x22details\x22,c===this.model))},imageSize:function(a){var b=this.model.get(\x22sizes\x22),c=!1;return a=a||\x22medium\x22,b&&(b[a]?c=b[a]:b.large?c=b.large:b.thumbnail?c=b.thumbnail:b.full&&(c=b.full),c)?_.clone(c):{url:this.model.get(\x22url\x22),width:this.model.get(\x22width\x22),height:this.model.get(\x22height\x22),orientation:this.model.get(\x22orientation\x22)}},updateSetting:function(a){var b,c,d=e(a.target).closest(\x22[data-setting]\x22);d.length&&(b=d.data(\x22setting\x22),c=a.target.value,this.model.get(b)!==c&&this.save(b,c))},save:function(){var a=this,b=this._save=this._save||{status:\x22ready\x22},c=this.model.save.apply(this.model,arguments),d=b.requests?e.when(c,b.requests):c;b.savedTimer&&clearTimeout(b.savedTimer),this.updateSave(\x22waiting\x22),b.requests=d,d.always(function(){b.requests===d&&(a.updateSave(\x22resolved\x22===d.state()?\x22complete\x22:\x22error\x22),b.savedTimer=setTimeout(function(){a.updateSave(\x22ready\x22),delete b.savedTimer},2e3))})},updateSave:function(a){var b=this._save=this._save||{status:\x22ready\x22};return a&&a!==b.status&&(this.$el.removeClass(\x22save-\x22+b.status),b.status=a),this.$el.addClass(\x22save-\x22+b.status),this},updateAll:function(){var a,b=this.$(\x22[data-setting]\x22),c=this.model;a=_.chain(b).map(function(a){var b,d,f=e(\x22input, textarea, select, [value]\x22,a);if(f.length)return b=e(a).data(\x22setting\x22),d=f.val(),c.get(b)!==d?[b,d]:void 0}).compact().object().value(),_.isEmpty(a)||c.save(a)},removeFromLibrary:function(a){\x22keydown\x22===a.type&&13!==a.keyCode&&32!==a.keyCode||(a.stopPropagation(),this.collection.remove(this.model))},checkClickHandler:function(a){var b=this.options.selection;b&&(a.stopPropagation(),b.where({id:this.model.get(\x22id\x22)}).length?(b.remove(this.model),this.$el.focus()):b.add(this.model),this.controller.trigger(\x22selection:toggle\x22))}}),_.each({caption:\x22_syncCaption\x22,title:\x22_syncTitle\x22,artist:\x22_syncArtist\x22,album:\x22_syncAlbum\x22},function(a,b){c.prototype[a]=function(a,c){var d=this.$(\x27[data-setting=\x22\x27+b+\x27\x22]\x27);return d.length?c===d.find(\x22input, textarea, select, [value]\x22).val()?this:this.render():this}}),a.exports=c},function(a,b){var c=wp.media.view.Attachment.extend({buttons:{check:!0}});a.exports=c},function(a,b){var c=wp.media.view.Attachment.extend({buttons:{close:!0}});a.exports=c},function(a,b){var c,d=wp.media.View,e=jQuery;c=d.extend({tagName:\x22ul\x22,className:\x22attachments\x22,attributes:{tabIndex:-1},initialize:function(){this.el.id=_.uniqueId(\x22__attachments-view-\x22),_.defaults(this.options,{refreshSensitivity:wp.media.isTouchDevice?300:200,refreshThreshold:3,AttachmentView:wp.media.view.Attachment,sortable:!1,resize:!0,idealColumnWidth:e(window).width()\x3c640?135:150}),this._viewsByCid={},this.$window=e(window),this.resizeEvent=\x22resize.media-modal-columns\x22,this.collection.on(\x22add\x22,function(a){this.views.add(this.createAttachmentView(a),{at:this.collection.indexOf(a)})},this),this.collection.on(\x22remove\x22,function(a){var b=this._viewsByCid[a.cid];delete this._viewsByCid[a.cid],b&&b.remove()},this),this.collection.on(\x22reset\x22,this.render,this),this.listenTo(this.controller,\x22library:selection:add\x22,this.attachmentFocus),this.scroll=_.chain(this.scroll).bind(this).throttle(this.options.refreshSensitivity).value(),this.options.scrollElement=this.options.scrollElement||this.el,e(this.options.scrollElement).on(\x22scroll\x22,this.scroll),this.initSortable(),_.bindAll(this,\x22setColumns\x22),this.options.resize&&(this.on(\x22ready\x22,this.bindEvents),this.controller.on(\x22open\x22,this.setColumns),_.defer(this.setColumns,this))},bindEvents:function(){this.$window.off(this.resizeEvent).on(this.resizeEvent,_.debounce(this.setColumns,50))},attachmentFocus:function(){this.$(\x22li:first\x22).focus()},restoreFocus:function(){this.$(\x22li.selected:first\x22).focus()},arrowEvent:function(a){var b=this.$el.children(\x22li\x22),c=this.columns,d=b.filter(\x22:focus\x22).index(),e=d+1\x3c=c?1:Math.ceil((d+1)/c);if(d!==-1){if(37===a.keyCode){if(0===d)return;b.eq(d-1).focus()}if(38===a.keyCode){if(1===e)return;b.eq(d-c).focus()}if(39===a.keyCode){if(b.length===d)return;b.eq(d+1).focus()}if(40===a.keyCode){if(Math.ceil(b.length/c)===e)return;b.eq(d+c).focus()}}},dispose:function(){this.collection.props.off(null,null,this),this.options.resize&&this.$window.off(this.resizeEvent),d.prototype.dispose.apply(this,arguments)},setColumns:function(){var a=this.columns,b=this.$el.width();b&&(this.columns=Math.min(Math.round(b/this.options.idealColumnWidth),12)||1,a&&a===this.columns||this.$el.closest(\x22.media-frame-content\x22).attr(\x22data-columns\x22,this.columns))},initSortable:function(){var a=this.collection;this.options.sortable&&e.fn.sortable&&(this.$el.sortable(_.extend({disabled:!!a.comparator,tolerance:\x22pointer\x22,start:function(a,b){b.item.data(\x22sortableIndexStart\x22,b.item.index())},update:function(b,c){var d=a.at(c.item.data(\x22sortableIndexStart\x22)),e=a.comparator;delete a.comparator,a.remove(d,{silent:!0}),a.add(d,{silent:!0,at:c.item.index()}),a.comparator=e,a.trigger(\x22reset\x22,a),a.saveMenuOrder()}},this.options.sortable)),a.props.on(\x22change:orderby\x22,function(){this.$el.sortable(\x22option\x22,\x22disabled\x22,!!a.comparator)},this),this.collection.props.on(\x22change:orderby\x22,this.refreshSortable,this),this.refreshSortable())},refreshSortable:function(){if(this.options.sortable&&e.fn.sortable){var a=this.collection,b=a.props.get(\x22orderby\x22),c=\x22menuOrder\x22===b||!a.comparator;this.$el.sortable(\x22option\x22,\x22disabled\x22,!c)}},createAttachmentView:function(a){var b=new this.options.AttachmentView({controller:this.controller,model:a,collection:this.collection,selection:this.options.selection});return this._viewsByCid[a.cid]=b},prepare:function(){this.collection.length?this.views.set(this.collection.map(this.createAttachmentView,this)):(this.views.unset(),this.collection.more().done(this.scroll))},ready:function(){this.scroll()},scroll:function(){var a,b=this,c=this.options.scrollElement,d=c.scrollTop;c===document&&(c=document.body,d=e(document).scrollTop()),e(c).is(\x22:visible\x22)&&this.collection.hasMore()&&(a=this.views.parent.toolbar,c.scrollHeight-(d+c.clientHeight)\x3cc.clientHeight/3&&a.get(\x22spinner\x22).show(),c.scrollHeight\x3cd+c.clientHeight*this.options.refreshThreshold&&this.collection.more().done(function(){b.scroll(),a.get(\x22spinner\x22).hide()}))}}),a.exports=c},function(a,b){var c,d=wp.media.view.l10n;c=wp.media.View.extend({tagName:\x22input\x22,className:\x22search\x22,id:\x22media-search-input\x22,attributes:{type:\x22search\x22,placeholder:d.searchMediaPlaceholder},events:{input:\x22search\x22,keyup:\x22search\x22},render:function(){return this.el.value=this.model.escape(\x22search\x22),this},search:_.debounce(function(a){a.target.value?this.model.set(\x22search\x22,a.target.value):this.model.unset(\x22search\x22)},300)}),a.exports=c},function(a,b){var c,d=jQuery;c=wp.media.View.extend({tagName:\x22select\x22,className:\x22attachment-filters\x22,id:\x22media-attachment-filters\x22,events:{change:\x22change\x22},keys:[],initialize:function(){this.createFilters(),_.extend(this.filters,this.options.filters),this.$el.html(_.chain(this.filters).map(function(a,b){return{el:d(\x22\x3coption\x3e\x3c/option\x3e\x22).val(b).html(a.text)[0],priority:a.priority||50}},this).sortBy(\x22priority\x22).pluck(\x22el\x22).value()),this.listenTo(this.model,\x22change\x22,this.select),this.select()},createFilters:function(){this.filters={}},change:function(){var a=this.filters[this.el.value];a&&this.model.set(a.props)},select:function(){var a=this.model,b=\x22all\x22,c=a.toJSON();_.find(this.filters,function(a,d){var e=_.all(a.props,function(a,b){return a===(_.isUndefined(c[b])?null:c[b])});if(e)return b=d}),this.$el.val(b)}}),a.exports=c},function(a,b){var c,d=wp.media.view.l10n;c=wp.media.view.AttachmentFilters.extend({id:\x22media-attachment-date-filters\x22,createFilters:function(){var a={};_.each(wp.media.view.settings.months||{},function(b,c){a[c]={text:b.text,props:{year:b.year,monthnum:b.month}}}),a.all={text:d.allDates,props:{monthnum:!1,year:!1},priority:10},this.filters=a}}),a.exports=c},function(a,b){var c,d=wp.media.view.l10n;c=wp.media.view.AttachmentFilters.extend({createFilters:function(){var a,b=this.model.get(\x22type\x22),c=wp.media.view.settings.mimeTypes,e=window.userSettings?parseInt(window.userSettings.uid,10):0;c&&b&&(a=c[b]),this.filters={all:{text:a||d.allMediaItems,props:{uploadedTo:null,orderby:\x22date\x22,order:\x22DESC\x22,author:null},priority:10},uploaded:{text:d.uploadedToThisPost,props:{uploadedTo:wp.media.view.settings.post.id,orderby:\x22menuOrder\x22,order:\x22ASC\x22,author:null},priority:20},unattached:{text:d.unattached,props:{uploadedTo:0,orderby:\x22menuOrder\x22,order:\x22ASC\x22,author:null},priority:50}},e&&(this.filters.mine={text:d.mine,props:{orderby:\x22date\x22,order:\x22DESC\x22,author:e},priority:50})}}),a.exports=c},function(a,b){var c,d=wp.media.view.l10n;c=wp.media.view.AttachmentFilters.extend({createFilters:function(){var a={},b=window.userSettings?parseInt(window.userSettings.uid,10):0;_.each(wp.media.view.settings.mimeTypes||{},function(b,c){a[c]={text:b,props:{status:null,type:c,uploadedTo:null,orderby:\x22date\x22,order:\x22DESC\x22,author:null}}}),a.all={text:d.allMediaItems,props:{status:null,type:null,uploadedTo:null,orderby:\x22date\x22,order:\x22DESC\x22,author:null},priority:10},wp.media.view.settings.post.id&&(a.uploaded={text:d.uploadedToThisPost,props:{status:null,type:null,uploadedTo:wp.media.view.settings.post.id,orderby:\x22menuOrder\x22,order:\x22ASC\x22,author:null},priority:20}),a.unattached={text:d.unattached,props:{status:null,uploadedTo:0,type:null,orderby:\x22menuOrder\x22,order:\x22ASC\x22,author:null},priority:50},b&&(a.mine={text:d.mine,props:{status:null,type:null,uploadedTo:null,orderby:\x22date\x22,order:\x22DESC\x22,author:b},priority:50}),wp.media.view.settings.mediaTrash&&this.controller.isModeActive(\x22grid\x22)&&(a.trash={text:d.trash,props:{uploadedTo:null,status:\x22trash\x22,type:null,orderby:\x22date\x22,order:\x22DESC\x22,author:null},priority:50}),this.filters=a}}),a.exports=c},function(a,b){var c,d=wp.media.View,e=wp.media.view.settings.mediaTrash,f=wp.media.view.l10n,g=jQuery;c=d.extend({tagName:\x22div\x22,className:\x22attachments-browser\x22,initialize:function(){_.defaults(this.options,{filters:!1,search:!0,date:!0,display:!1,sidebar:!0,AttachmentView:wp.media.view.Attachment.Library}),this.controller.on(\x22toggle:upload:attachment\x22,this.toggleUploader,this),this.controller.on(\x22edit:selection\x22,this.editSelection),this.options.sidebar&&\x22errors\x22===this.options.sidebar&&this.createSidebar(),this.createUploader(),this.createToolbar(),this.createAttachmentsHeading(),this.createAttachments(),this.options.sidebar&&\x22errors\x22!==this.options.sidebar&&this.createSidebar(),this.updateContent(),this.options.sidebar&&\x22errors\x22!==this.options.sidebar||(this.$el.addClass(\x22hide-sidebar\x22),\x22errors\x22===this.options.sidebar&&this.$el.addClass(\x22sidebar-for-errors\x22)),this.collection.on(\x22add remove reset\x22,this.updateContent,this)},editSelection:function(a){a.$(\x22.media-button-backToLibrary\x22).focus()},dispose:function(){return this.options.selection.off(null,null,this),d.prototype.dispose.apply(this,arguments),this},createToolbar:function(){var a,b,c;c={controller:this.controller},this.controller.isModeActive(\x22grid\x22)&&(c.className=\x22media-toolbar wp-filter\x22),this.toolbar=new wp.media.view.Toolbar(c),this.views.add(this.toolbar),this.toolbar.set(\x22spinner\x22,new wp.media.view.Spinner({priority:-60})),-1!==g.inArray(this.options.filters,[\x22uploaded\x22,\x22all\x22])&&(this.toolbar.set(\x22filtersLabel\x22,new wp.media.view.Label({value:f.filterByType,attributes:{\x22for\x22:\x22media-attachment-filters\x22},priority:-80}).render()),\x22uploaded\x22===this.options.filters?this.toolbar.set(\x22filters\x22,new wp.media.view.AttachmentFilters.Uploaded({controller:this.controller,model:this.collection.props,priority:-80}).render()):(b=new wp.media.view.AttachmentFilters.All({controller:this.controller,model:this.collection.props,priority:-80}),this.toolbar.set(\x22filters\x22,b.render()))),this.controller.isModeActive(\x22grid\x22)?(a=d.extend({className:\x22view-switch media-grid-view-switch\x22,template:wp.template(\x22media-library-view-switcher\x22)}),this.toolbar.set(\x22libraryViewSwitcher\x22,new a({controller:this.controller,priority:-90}).render()),this.toolbar.set(\x22dateFilterLabel\x22,new wp.media.view.Label({value:f.filterByDate,attributes:{\x22for\x22:\x22media-attachment-date-filters\x22},priority:-75}).render()),this.toolbar.set(\x22dateFilter\x22,new wp.media.view.DateFilter({controller:this.controller,model:this.collection.props,priority:-75}).render()),this.toolbar.set(\x22selectModeToggleButton\x22,new wp.media.view.SelectModeToggleButton({text:f.bulkSelect,controller:this.controller,priority:-70}).render()),this.toolbar.set(\x22deleteSelectedButton\x22,new wp.media.view.DeleteSelectedButton({filters:b,style:\x22primary\x22,disabled:!0,text:e?f.trashSelected:f.deletePermanently,controller:this.controller,priority:-80,click:function(){var a=[],b=[],c=this.controller.state().get(\x22selection\x22),d=this.controller.state().get(\x22library\x22);c.length&&(e||window.confirm(f.warnBulkDelete))&&(e&&\x22trash\x22!==c.at(0).get(\x22status\x22)&&!window.confirm(f.warnBulkTrash)||(c.each(function(c){return c.get(\x22nonces\x22)[\x22delete\x22]?void(e&&\x22trash\x22===c.get(\x22status\x22)?(c.set(\x22status\x22,\x22inherit\x22),a.push(c.save()),b.push(c)):e?(c.set(\x22status\x22,\x22trash\x22),a.push(c.save()),b.push(c)):c.destroy({wait:!0})):void b.push(c)}),a.length?(c.remove(b),g.when.apply(null,a).then(_.bind(function(){d._requery(!0),this.controller.trigger(\x22selection:action:done\x22)},this))):this.controller.trigger(\x22selection:action:done\x22)))}}).render()),e&&this.toolbar.set(\x22deleteSelectedPermanentlyButton\x22,new wp.media.view.DeleteSelectedPermanentlyButton({filters:b,style:\x22link button-link-delete\x22,disabled:!0,text:f.deletePermanently,controller:this.controller,priority:-55,click:function(){var a=[],b=[],c=this.controller.state().get(\x22selection\x22);c.length&&window.confirm(f.warnBulkDelete)&&(c.each(function(c){return c.get(\x22nonces\x22)[\x22delete\x22]?void b.push(c):void a.push(c)}),a.length&&c.remove(a),b.length&&g.when.apply(null,b.map(function(a){return a.destroy()})).then(_.bind(function(){this.controller.trigger(\x22selection:action:done\x22)},this)))}}).render())):this.options.date&&(this.toolbar.set(\x22dateFilterLabel\x22,new wp.media.view.Label({value:f.filterByDate,attributes:{\x22for\x22:\x22media-attachment-date-filters\x22},priority:-75}).render()),this.toolbar.set(\x22dateFilter\x22,new wp.media.view.DateFilter({controller:this.controller,model:this.collection.props,priority:-75}).render())),this.options.search&&(this.toolbar.set(\x22searchLabel\x22,new wp.media.view.Label({value:f.searchMediaLabel,attributes:{\x22for\x22:\x22media-search-input\x22},priority:60}).render()),this.toolbar.set(\x22search\x22,new wp.media.view.Search({controller:this.controller,model:this.collection.props,priority:60}).render())),this.options.dragInfo&&this.toolbar.set(\x22dragInfo\x22,new d({el:g(\x27\x3cdiv class=\x22instructions\x22\x3e\x27+f.dragInfo+\x22\x3c/div\x3e\x22)[0],priority:-40})),this.options.suggestedWidth&&this.options.suggestedHeight&&this.toolbar.set(\x22suggestedDimensions\x22,new d({el:g(\x27\x3cdiv class=\x22instructions\x22\x3e\x27+f.suggestedDimensions.replace(\x22%1$s\x22,this.options.suggestedWidth).replace(\x22%2$s\x22,this.options.suggestedHeight)+\x22\x3c/div\x3e\x22)[0],priority:-40}))},updateContent:function(){var a,b=this;a=this.controller.isModeActive(\x22grid\x22)?b.attachmentsNoResults:b.uploader,this.collection.length?(a.$el.addClass(\x22hidden\x22),b.toolbar.get(\x22spinner\x22).hide()):(this.toolbar.get(\x22spinner\x22).show(),this.dfd=this.collection.more().done(function(){b.collection.length?a.$el.addClass(\x22hidden\x22):a.$el.removeClass(\x22hidden\x22),b.toolbar.get(\x22spinner\x22).hide()}))},createUploader:function(){this.uploader=new wp.media.view.UploaderInline({controller:this.controller,status:!1,message:this.controller.isModeActive(\x22grid\x22)?\x22\x22:f.noItemsFound,canClose:this.controller.isModeActive(\x22grid\x22)}),this.uploader.$el.addClass(\x22hidden\x22),this.views.add(this.uploader)},toggleUploader:function(){this.uploader.$el.hasClass(\x22hidden\x22)?this.uploader.show():this.uploader.hide()},createAttachments:function(){this.attachments=new wp.media.view.Attachments({controller:this.controller,collection:this.collection,selection:this.options.selection,model:this.model,sortable:this.options.sortable,scrollElement:this.options.scrollElement,idealColumnWidth:this.options.idealColumnWidth,AttachmentView:this.options.AttachmentView}),this.controller.on(\x22attachment:keydown:arrow\x22,_.bind(this.attachments.arrowEvent,this.attachments)),this.controller.on(\x22attachment:details:shift-tab\x22,_.bind(this.attachments.restoreFocus,this.attachments)),this.views.add(this.attachments),this.controller.isModeActive(\x22grid\x22)&&(this.attachmentsNoResults=new d({controller:this.controller,tagName:\x22p\x22}),this.attachmentsNoResults.$el.addClass(\x22hidden no-media\x22),this.attachmentsNoResults.$el.html(f.noMedia),this.views.add(this.attachmentsNoResults))},createAttachmentsHeading:function(){this.attachmentsHeading=new wp.media.view.Heading({text:f.attachmentsList,level:\x22h2\x22,className:\x22media-views-heading screen-reader-text\x22}),this.views.add(this.attachmentsHeading)},createSidebar:function(){var a=this.options,b=a.selection,c=this.sidebar=new wp.media.view.Sidebar({controller:this.controller});this.views.add(c),this.controller.uploader&&c.set(\x22uploads\x22,new wp.media.view.UploaderStatus({controller:this.controller,priority:40})),b.on(\x22selection:single\x22,this.createSingle,this),b.on(\x22selection:unsingle\x22,this.disposeSingle,this),b.single()&&this.createSingle()},createSingle:function(){var a=this.sidebar,b=this.options.selection.single();a.set(\x22details\x22,new wp.media.view.Attachment.Details({controller:this.controller,model:b,priority:80})),a.set(\x22compat\x22,new wp.media.view.AttachmentCompat({controller:this.controller,model:b,priority:120})),this.options.display&&a.set(\x22display\x22,new wp.media.view.Settings.AttachmentDisplay({controller:this.controller,model:this.model.display(b),attachment:b,priority:160,userSettings:this.model.get(\x22displayUserSettings\x22)})),\x22insert\x22===this.model.id&&a.$el.addClass(\x22visible\x22)},disposeSingle:function(){var a=this.sidebar;a.unset(\x22details\x22),a.unset(\x22compat\x22),a.unset(\x22display\x22),a.$el.removeClass(\x22visible\x22)}}),a.exports=c},function(a,b){var c,d=wp.media.view.l10n;c=wp.media.View.extend({tagName:\x22div\x22,className:\x22media-selection\x22,template:wp.template(\x22media-selection\x22),events:{\x22click .edit-selection\x22:\x22edit\x22,\x22click .clear-selection\x22:\x22clear\x22},initialize:function(){_.defaults(this.options,{editable:!1,clearable:!0}),this.attachments=new wp.media.view.Attachments.Selection({controller:this.controller,collection:this.collection,selection:this.collection,model:new Backbone.Model}),this.views.set(\x22.selection-view\x22,this.attachments),this.collection.on(\x22add remove reset\x22,this.refresh,this),this.controller.on(\x22content:activate\x22,this.refresh,this)},ready:function(){this.refresh()},refresh:function(){if(this.$el.children().length){var a=this.collection,b=\x22edit-selection\x22===this.controller.content.mode();this.$el.toggleClass(\x22empty\x22,!a.length),this.$el.toggleClass(\x22one\x22,1===a.length),this.$el.toggleClass(\x22editing\x22,b),this.$(\x22.count\x22).text(d.selected.replace(\x22%d\x22,a.length))}},edit:function(a){a.preventDefault(),this.options.editable&&this.options.editable.call(this,this.collection)},clear:function(a){a.preventDefault(),this.collection.reset(),this.controller.modal.focusManager.focus()}}),a.exports=c},function(a,b){var c=wp.media.view.Attachment.extend({className:\x22attachment selection\x22,toggleSelection:function(){this.options.selection.single(this.model)}});a.exports=c},function(a,b){var c,d=wp.media.view.Attachments;c=d.extend({events:{},initialize:function(){return _.defaults(this.options,{sortable:!1,resize:!1,AttachmentView:wp.media.view.Attachment.Selection}),d.prototype.initialize.apply(this,arguments)}}),a.exports=c},function(a,b){var c=wp.media.view.Attachment.Selection.extend({buttons:{close:!0}});a.exports=c},function(a,b){var c,d=wp.media.View,e=Backbone.$;c=d.extend({events:{\x22click button\x22:\x22updateHandler\x22,\x22change input\x22:\x22updateHandler\x22,\x22change select\x22:\x22updateHandler\x22,\x22change textarea\x22:\x22updateHandler\x22},initialize:function(){this.model=this.model||new Backbone.Model,this.listenTo(this.model,\x22change\x22,this.updateChanges)},prepare:function(){return _.defaults({model:this.model.toJSON()},this.options)},render:function(){return d.prototype.render.apply(this,arguments),_(this.model.attributes).chain().keys().each(this.update,this),this},update:function(a){var b,c,d=this.model.get(a),e=this.$(\x27[data-setting=\x22\x27+a+\x27\x22]\x27);e.length&&(e.is(\x22select\x22)?(c=e.find(\x27[value=\x22\x27+d+\x27\x22]\x27),c.length?(e.find(\x22option\x22).prop(\x22selected\x22,!1),c.prop(\x22selected\x22,!0)):this.model.set(a,e.find(\x22:selected\x22).val())):e.hasClass(\x22button-group\x22)?(b=e.find(\x22button\x22).removeClass(\x22active\x22),b.filter(\x27[value=\x22\x27+d+\x27\x22]\x27).addClass(\x22active\x22)):e.is(\x27input[type=\x22text\x22], textarea\x27)?e.is(\x22:focus\x22)||e.val(d):e.is(\x27input[type=\x22checkbox\x22]\x27)&&e.prop(\x22checked\x22,!!d&&\x22false\x22!==d))},updateHandler:function(a){var b,c=e(a.target).closest(\x22[data-setting]\x22),d=a.target.value;a.preventDefault(),c.length&&(c.is(\x27input[type=\x22checkbox\x22]\x27)&&(d=c[0].checked),this.model.set(c.data(\x22setting\x22),d),(b=c.data(\x22userSetting\x22))&&window.setUserSetting(b,d))},updateChanges:function(a){a.hasChanged()&&_(a.changed).chain().keys().each(this.update,this)}}),a.exports=c},function(a,b){var c,d=wp.media.view.Settings;c=d.extend({className:\x22attachment-display-settings\x22,template:wp.template(\x22attachment-display-settings\x22),initialize:function(){var a=this.options.attachment;_.defaults(this.options,{userSettings:!1}),d.prototype.initialize.apply(this,arguments),this.listenTo(this.model,\x22change:link\x22,this.updateLinkTo),a&&a.on(\x22change:uploading\x22,this.render,this)},dispose:function(){var a=this.options.attachment;a&&a.off(null,null,this),d.prototype.dispose.apply(this,arguments)},render:function(){var a=this.options.attachment;return a&&_.extend(this.options,{sizes:a.get(\x22sizes\x22),type:a.get(\x22type\x22)}),d.prototype.render.call(this),this.updateLinkTo(),this},updateLinkTo:function(){var a=this.model.get(\x22link\x22),b=this.$(\x22.link-to-custom\x22),c=this.options.attachment;return\x22none\x22===a||\x22embed\x22===a||!c&&\x22custom\x22!==a?void b.addClass(\x22hidden\x22):(c&&(\x22post\x22===a?b.val(c.get(\x22link\x22)):\x22file\x22===a?b.val(c.get(\x22url\x22)):this.model.get(\x22linkUrl\x22)||b.val(\x22http://\x22),b.prop(\x22readonly\x22,\x22custom\x22!==a)),b.removeClass(\x22hidden\x22),void(!wp.media.isTouchDevice&&b.is(\x22:visible\x22)&&b.focus()[0].select()))}}),a.exports=c},function(a,b){var c=wp.media.view.Settings.extend({className:\x22collection-settings gallery-settings\x22,template:wp.template(\x22gallery-settings\x22)});a.exports=c},function(a,b){var c=wp.media.view.Settings.extend({className:\x22collection-settings playlist-settings\x22,template:wp.template(\x22playlist-settings\x22)});a.exports=c},function(a,b){var c,d=wp.media.view.Attachment,e=wp.media.view.l10n;c=d.extend({tagName:\x22div\x22,className:\x22attachment-details\x22,template:wp.template(\x22attachment-details\x22),attributes:{},events:{\x22change [data-setting]\x22:\x22updateSetting\x22,\x22change [data-setting] input\x22:\x22updateSetting\x22,\x22change [data-setting] select\x22:\x22updateSetting\x22,\x22change [data-setting] textarea\x22:\x22updateSetting\x22,\x22click .delete-attachment\x22:\x22deleteAttachment\x22,\x22click .trash-attachment\x22:\x22trashAttachment\x22,\x22click .untrash-attachment\x22:\x22untrashAttachment\x22,\x22click .edit-attachment\x22:\x22editAttachment\x22,keydown:\x22toggleSelectionHandler\x22},initialize:function(){this.options=_.defaults(this.options,{rerenderOnModelChange:!1}),d.prototype.initialize.apply(this,arguments)},deleteAttachment:function(a){a.preventDefault(),window.confirm(e.warnDelete)&&(this.model.destroy(),this.controller.modal.focusManager.focus())},trashAttachment:function(a){var b=this.controller.library;a.preventDefault(),wp.media.view.settings.mediaTrash&&\x22edit-metadata\x22===this.controller.content.mode()?(this.model.set(\x22status\x22,\x22trash\x22),this.model.save().done(function(){b._requery(!0)})):this.model.destroy()},untrashAttachment:function(a){var b=this.controller.library;a.preventDefault(),this.model.set(\x22status\x22,\x22inherit\x22),this.model.save().done(function(){b._requery(!0)})},editAttachment:function(a){var b=this.controller.states.get(\x22edit-image\x22);window.imageEdit&&b?(a.preventDefault(),b.set(\x22image\x22,this.model),this.controller.setState(\x22edit-image\x22)):this.$el.addClass(\x22needs-refresh\x22)},toggleSelectionHandler:function(a){return\x22keydown\x22===a.type&&9===a.keyCode&&a.shiftKey&&a.target===this.$(\x22:tabbable\x22).get(0)?(this.controller.trigger(\x22attachment:details:shift-tab\x22,a),!1):37===a.keyCode||38===a.keyCode||39===a.keyCode||40===a.keyCode?void this.controller.trigger(\x22attachment:keydown:arrow\x22,a):void 0}}),a.exports=c},function(a,b){var c,d=wp.media.View;c=d.extend({tagName:\x22form\x22,className:\x22compat-item\x22,events:{submit:\x22preventDefault\x22,\x22change input\x22:\x22save\x22,\x22change select\x22:\x22save\x22,\x22change textarea\x22:\x22save\x22},initialize:function(){this.listenTo(this.model,\x22change:compat\x22,this.render)},dispose:function(){return this.$(\x22:focus\x22).length&&this.save(),d.prototype.dispose.apply(this,arguments)},render:function(){var a=this.model.get(\x22compat\x22);if(a&&a.item)return this.views.detach(),this.$el.html(a.item),this.views.render(),this},preventDefault:function(a){a.preventDefault()},save:function(a){var b={};a&&a.preventDefault(),_.each(this.$el.serializeArray(),function(a){b[a.name]=a.value}),this.controller.trigger(\x22attachment:compat:waiting\x22,[\x22waiting\x22]),this.model.saveCompat(b).always(_.bind(this.postSave,this))},postSave:function(){this.controller.trigger(\x22attachment:compat:ready\x22,[\x22ready\x22])}}),a.exports=c},function(a,b){var c=wp.media.View.extend({className:\x22media-iframe\x22,render:function(){return this.views.detach(),this.$el.html(\x27\x3ciframe src=\x22\x27+this.controller.state().get(\x22src\x22)+\x27\x22 /\x3e\x27),this.views.render(),this}});a.exports=c},function(a,b){var c=wp.media.View.extend({className:\x22media-embed\x22,initialize:function(){this.url=new wp.media.view.EmbedUrl({controller:this.controller,model:this.model.props}).render(),this.views.set([this.url]),this.refresh(),this.listenTo(this.model,\x22change:type\x22,this.refresh),this.listenTo(this.model,\x22change:loading\x22,this.loading)},settings:function(a){this._settings&&this._settings.remove(),this._settings=a,this.views.add(a)},refresh:function(){var a,b=this.model.get(\x22type\x22);if(\x22image\x22===b)a=wp.media.view.EmbedImage;else{if(\x22link\x22!==b)return;a=wp.media.view.EmbedLink}this.settings(new a({controller:this.controller,model:this.model.props,priority:40}))},loading:function(){this.$el.toggleClass(\x22embed-loading\x22,this.model.get(\x22loading\x22))}});a.exports=c},function(a,b){var c=wp.media.View.extend({tagName:\x22label\x22,className:\x22screen-reader-text\x22,initialize:function(){this.value=this.options.value},render:function(){return this.$el.html(this.value),this}});a.exports=c},function(a,b){var c,d=wp.media.View,e=jQuery;c=d.extend({tagName:\x22label\x22,className:\x22embed-url\x22,events:{input:\x22url\x22,keyup:\x22url\x22,change:\x22url\x22},initialize:function(){this.$input=e(\x27\x3cinput id=\x22embed-url-field\x22 type=\x22url\x22 /\x3e\x27).val(this.model.get(\x22url\x22)),this.input=this.$input[0],this.spinner=e(\x27\x3cspan class=\x22spinner\x22 /\x3e\x27)[0],this.$el.append([this.input,this.spinner]),this.listenTo(this.model,\x22change:url\x22,this.render),this.model.get(\x22url\x22)&&_.delay(_.bind(function(){this.model.trigger(\x22change:url\x22)},this),500)},render:function(){var a=this.$input;if(!a.is(\x22:focus\x22))return this.input.value=this.model.get(\x22url\x22)||\x22http://\x22,d.prototype.render.apply(this,arguments),this},ready:function(){wp.media.isTouchDevice||this.focus()},url:function(a){this.model.set(\x22url\x22,e.trim(a.target.value))},focus:function(){var a=this.$input;a.is(\x22:visible\x22)&&a.focus()[0].select()}}),a.exports=c},function(a,b){var c,d=jQuery;c=wp.media.view.Settings.extend({className:\x22embed-link-settings\x22,template:wp.template(\x22embed-link-settings\x22),initialize:function(){this.listenTo(this.model,\x22change:url\x22,this.updateoEmbed)},updateoEmbed:_.debounce(function(){var a=this.model.get(\x22url\x22);this.$(\x22.embed-container\x22).hide().find(\x22.embed-preview\x22).empty(),this.$(\x22.setting\x22).hide(),a&&(a.length\x3c11||!a.match(/^http(s)?:\x5c/\x5c//))||this.fetch()},wp.media.controller.Embed.sensitivity),fetch:function(){var a,b,c=this.model.get(\x22url\x22);d(\x22#embed-url-field\x22).val()===c&&(this.dfd&&\x22pending\x22===this.dfd.state()&&this.dfd.abort(),a=/https?:\x5c/\x5c/www\x5c.youtube\x5c.com\x5c/embed\x5c/([^\x5c/]+)/,b=a.exec(c),b&&(c=\x22https://www.youtube.com/watch?v=\x22+b[1]),this.dfd=wp.apiRequest({url:wp.media.view.settings.oEmbedProxyUrl,data:{url:c,maxwidth:this.model.get(\x22width\x22),maxheight:this.model.get(\x22height\x22)},type:\x22GET\x22,dataType:\x22json\x22,context:this}).done(function(a){this.renderoEmbed({data:{body:a.html||\x22\x22}})}).fail(this.renderFail))},renderFail:function(a,b){\x22abort\x22!==b&&this.$(\x22.link-text\x22).show()},renderoEmbed:function(a){var b=a&&a.data&&a.data.body||\x22\x22;b?this.$(\x22.embed-container\x22).show().find(\x22.embed-preview\x22).html(b):this.renderFail()}}),a.exports=c},function(a,b){var c,d=wp.media.view.Settings.AttachmentDisplay;c=d.extend({className:\x22embed-media-settings\x22,template:wp.template(\x22embed-image-settings\x22),initialize:function(){d.prototype.initialize.apply(this,arguments),this.listenTo(this.model,\x22change:url\x22,this.updateImage)},updateImage:function(){this.$(\x22img\x22).attr(\x22src\x22,this.model.get(\x22url\x22))}}),a.exports=c},function(a,b){var c,d=wp.media.view.Settings.AttachmentDisplay,e=jQuery;c=d.extend({className:\x22image-details\x22,template:wp.template(\x22image-details\x22),events:_.defaults(d.prototype.events,{\x22click .edit-attachment\x22:\x22editAttachment\x22,\x22click .replace-attachment\x22:\x22replaceAttachment\x22,\x22click .advanced-toggle\x22:\x22onToggleAdvanced\x22,\x27change [data-setting=\x22customWidth\x22]\x27:\x22onCustomSize\x22,\x27change [data-setting=\x22customHeight\x22]\x27:\x22onCustomSize\x22,\x27keyup [data-setting=\x22customWidth\x22]\x27:\x22onCustomSize\x22,\x27keyup [data-setting=\x22customHeight\x22]\x27:\x22onCustomSize\x22}),initialize:function(){this.options.attachment=this.model.attachment,this.listenTo(this.model,\x22change:url\x22,this.updateUrl),this.listenTo(this.model,\x22change:link\x22,this.toggleLinkSettings),this.listenTo(this.model,\x22change:size\x22,this.toggleCustomSize),d.prototype.initialize.apply(this,arguments)},prepare:function(){var a=!1;return this.model.attachment&&(a=this.model.attachment.toJSON()),\x0a_.defaults({model:this.model.toJSON(),attachment:a},this.options)},render:function(){var a=arguments;return this.model.attachment&&\x22pending\x22===this.model.dfd.state()?this.model.dfd.done(_.bind(function(){d.prototype.render.apply(this,a),this.postRender()},this)).fail(_.bind(function(){this.model.attachment=!1,d.prototype.render.apply(this,a),this.postRender()},this)):(d.prototype.render.apply(this,arguments),this.postRender()),this},postRender:function(){setTimeout(_.bind(this.resetFocus,this),10),this.toggleLinkSettings(),\x22show\x22===window.getUserSetting(\x22advImgDetails\x22)&&this.toggleAdvanced(!0),this.trigger(\x22post-render\x22)},resetFocus:function(){this.$(\x22.link-to-custom\x22).blur(),this.$(\x22.embed-media-settings\x22).scrollTop(0)},updateUrl:function(){this.$(\x22.image img\x22).attr(\x22src\x22,this.model.get(\x22url\x22)),this.$(\x22.url\x22).val(this.model.get(\x22url\x22))},toggleLinkSettings:function(){\x22none\x22===this.model.get(\x22link\x22)?this.$(\x22.link-settings\x22).addClass(\x22hidden\x22):this.$(\x22.link-settings\x22).removeClass(\x22hidden\x22)},toggleCustomSize:function(){\x22custom\x22!==this.model.get(\x22size\x22)?this.$(\x22.custom-size\x22).addClass(\x22hidden\x22):this.$(\x22.custom-size\x22).removeClass(\x22hidden\x22)},onCustomSize:function(a){var b,c=e(a.target).data(\x22setting\x22),d=e(a.target).val();return!/^\x5cd+/.test(d)||parseInt(d,10)\x3c1?void a.preventDefault():void(\x22customWidth\x22===c?(b=Math.round(1/this.model.get(\x22aspectRatio\x22)*d),this.model.set(\x22customHeight\x22,b,{silent:!0}),this.$(\x27[data-setting=\x22customHeight\x22]\x27).val(b)):(b=Math.round(this.model.get(\x22aspectRatio\x22)*d),this.model.set(\x22customWidth\x22,b,{silent:!0}),this.$(\x27[data-setting=\x22customWidth\x22]\x27).val(b)))},onToggleAdvanced:function(a){a.preventDefault(),this.toggleAdvanced()},toggleAdvanced:function(a){var b,c=this.$el.find(\x22.advanced-section\x22);c.hasClass(\x22advanced-visible\x22)||a===!1?(c.removeClass(\x22advanced-visible\x22),c.find(\x22.advanced-settings\x22).addClass(\x22hidden\x22),b=\x22hide\x22):(c.addClass(\x22advanced-visible\x22),c.find(\x22.advanced-settings\x22).removeClass(\x22hidden\x22),b=\x22show\x22),window.setUserSetting(\x22advImgDetails\x22,b)},editAttachment:function(a){var b=this.controller.states.get(\x22edit-image\x22);window.imageEdit&&b&&(a.preventDefault(),b.set(\x22image\x22,this.model.attachment),this.controller.setState(\x22edit-image\x22))},replaceAttachment:function(a){a.preventDefault(),this.controller.setState(\x22replace-image\x22)}}),a.exports=c},function(a,b){var c,d=wp.media.View,e=wp.media.view.UploaderStatus,f=wp.media.view.l10n,g=jQuery;c=d.extend({className:\x22crop-content\x22,template:wp.template(\x22crop-content\x22),initialize:function(){_.bindAll(this,\x22onImageLoad\x22)},ready:function(){this.controller.frame.on(\x22content:error:crop\x22,this.onError,this),this.$image=this.$el.find(\x22.crop-image\x22),this.$image.on(\x22load\x22,this.onImageLoad),g(window).on(\x22resize.cropper\x22,_.debounce(this.onImageLoad,250))},remove:function(){g(window).off(\x22resize.cropper\x22),this.$el.remove(),this.$el.off(),d.prototype.remove.apply(this,arguments)},prepare:function(){return{title:f.cropYourImage,url:this.options.attachment.get(\x22url\x22)}},onImageLoad:function(){var a,b=this.controller.get(\x22imgSelectOptions\x22);\x22function\x22==typeof b&&(b=b(this.options.attachment,this.controller)),b=_.extend(b,{parent:this.$el,onInit:function(){var b=a.getOptions().aspectRatio;this.parent.children().on(\x22mousedown touchstart\x22,function(c){!b&&c.shiftKey&&a.setOptions({aspectRatio:\x221:1\x22})}),this.parent.children().on(\x22mouseup touchend\x22,function(){a.setOptions({aspectRatio:!!b&&b})})}}),this.trigger(\x22image-loaded\x22),a=this.controller.imgSelect=this.$image.imgAreaSelect(b)},onError:function(){var a=this.options.attachment.get(\x22filename\x22);this.views.add(\x22.upload-errors\x22,new wp.media.view.UploaderStatusError({filename:e.prototype.filename(a),message:window._wpMediaViewsL10n.cropError}),{at:0})}}),a.exports=c},function(a,b){var c,d=wp.media.view;c=d.Cropper.extend({className:\x22crop-content site-icon\x22,ready:function(){d.Cropper.prototype.ready.apply(this,arguments),this.$(\x22.crop-image\x22).on(\x22load\x22,_.bind(this.addSidebar,this))},addSidebar:function(){this.sidebar=new wp.media.view.Sidebar({controller:this.controller}),this.sidebar.set(\x22preview\x22,new wp.media.view.SiteIconPreview({controller:this.controller,attachment:this.options.attachment})),this.controller.cropperView.views.add(this.sidebar)}}),a.exports=c},function(a,b){var c,d=wp.media.View,e=jQuery;c=d.extend({className:\x22site-icon-preview\x22,template:wp.template(\x22site-icon-preview\x22),ready:function(){this.controller.imgSelect.setOptions({onInit:this.updatePreview,onSelectChange:this.updatePreview})},prepare:function(){return{url:this.options.attachment.get(\x22url\x22)}},updatePreview:function(a,b){var c=64/b.width,d=64/b.height,f=16/b.width,g=16/b.height;e(\x22#preview-app-icon\x22).css({width:Math.round(c*this.imageWidth)+\x22px\x22,height:Math.round(d*this.imageHeight)+\x22px\x22,marginLeft:\x22-\x22+Math.round(c*b.x1)+\x22px\x22,marginTop:\x22-\x22+Math.round(d*b.y1)+\x22px\x22}),e(\x22#preview-favicon\x22).css({width:Math.round(f*this.imageWidth)+\x22px\x22,height:Math.round(g*this.imageHeight)+\x22px\x22,marginLeft:\x22-\x22+Math.round(f*b.x1)+\x22px\x22,marginTop:\x22-\x22+Math.floor(g*b.y1)+\x22px\x22})}}),a.exports=c},function(a,b){var c,d=wp.media.View;c=d.extend({className:\x22image-editor\x22,template:wp.template(\x22image-editor\x22),initialize:function(a){this.editor=window.imageEdit,this.controller=a.controller,d.prototype.initialize.apply(this,arguments)},prepare:function(){return this.model.toJSON()},loadEditor:function(){var a=this.editor.open(this.model.get(\x22id\x22),this.model.get(\x22nonces\x22).edit,this);a.done(_.bind(this.focus,this))},focus:function(){this.$(\x22.imgedit-submit .button\x22).eq(0).focus()},back:function(){var a=this.controller.lastState();this.controller.setState(a)},refresh:function(){this.model.fetch()},save:function(){var a=this.controller.lastState();this.model.fetch().done(_.bind(function(){this.controller.setState(a)},this))}}),a.exports=c},function(a,b){var c=wp.media.View.extend({tagName:\x22span\x22,className:\x22spinner\x22,spinnerTimeout:!1,delay:400,show:function(){return this.spinnerTimeout||(this.spinnerTimeout=_.delay(function(a){a.addClass(\x22is-active\x22)},this.delay,this.$el)),this},hide:function(){return this.$el.removeClass(\x22is-active\x22),this.spinnerTimeout=clearTimeout(this.spinnerTimeout),this}});a.exports=c},function(a,b){var c=wp.media.View.extend({tagName:function(){return this.options.level||\x22h1\x22},className:\x22media-views-heading\x22,initialize:function(){this.options.className&&this.$el.addClass(this.options.className),this.text=this.options.text},render:function(){return this.$el.html(this.text),this}});a.exports=c}]));'}