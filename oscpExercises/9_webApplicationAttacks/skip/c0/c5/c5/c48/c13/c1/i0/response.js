var res = {'data':'HTTP/1.1 200 Partial Content\x0aDate: Sun, 20 Sep 2020 15:00:03 GMT\x0aServer: Apache/2.4.29 (Ubuntu)\x0aLast-Modified: Tue, 16 May 2017 17:58:41 GMT\x0aETag: \x223f3d-54fa7ebfe5640-gzip\x22\x0aAccept-Ranges: bytes\x0aVary: Accept-Encoding\x0aContent-Encoding: gzip\x0aContent-Range: bytes 0-5024/5025\x0aContent-Length: 5025\x0aKeep-Alive: timeout=5, max=19\x0aConnection: Keep-Alive\x0aContent-Type: application/javascript\x0a\x0a/* global plupload, pluploadL10n, ajaxurl, post_id, wpUploaderInit, deleteUserSetting, setUserSetting, getUserSetting, shortform */\x0avar topWin = window.dialogArguments || opener || parent || top, uploader, uploader_init;\x0a\x0a// progress and success handlers for media multi uploads\x0afunction fileQueued(fileObj) {\x0a\x09// Get rid of unused form\x0a\x09jQuery(\x27.media-blank\x27).remove();\x0a\x0a\x09var items = jQuery(\x27#media-items\x27).children(), postid = post_id || 0;\x0a\x0a\x09// Collapse a single item\x0a\x09if ( items.length == 1 ) {\x0a\x09\x09items.removeClass(\x27open\x27).find(\x27.slidetoggle\x27).slideUp(200);\x0a\x09}\x0a\x09// Create a progress bar containing the filename\x0a\x09jQuery(\x27\x3cdiv class=\x22media-item\x22\x3e\x27)\x0a\x09\x09.attr( \x27id\x27, \x27media-item-\x27 + fileObj.id )\x0a\x09\x09.addClass(\x27child-of-\x27 + postid)\x0a\x09\x09.append(\x27\x3cdiv class=\x22progress\x22\x3e\x3cdiv class=\x22percent\x22\x3e0%\x3c/div\x3e\x3cdiv class=\x22bar\x22\x3e\x3c/div\x3e\x3c/div\x3e\x27,\x0a\x09\x09\x09jQuery(\x27\x3cdiv class=\x22filename original\x22\x3e\x27).text( \x27 \x27 + fileObj.name ))\x0a\x09\x09.appendTo( jQuery(\x27#media-items\x27 ) );\x0a\x0a\x09// Disable submit\x0a\x09jQuery(\x27#insert-gallery\x27).prop(\x27disabled\x27, true);\x0a}\x0a\x0afunction uploadStart() {\x0a\x09try {\x0a\x09\x09if ( typeof topWin.tb_remove != \x27undefined\x27 )\x0a\x09\x09\x09topWin.jQuery(\x27#TB_overlay\x27).unbind(\x27click\x27, topWin.tb_remove);\x0a\x09} catch(e){}\x0a\x0a\x09return true;\x0a}\x0a\x0afunction uploadProgress(up, file) {\x0a\x09var item = jQuery(\x27#media-item-\x27 + file.id);\x0a\x0a\x09jQuery(\x27.bar\x27, item).width( (200 * file.loaded) / file.size );\x0a\x09jQuery(\x27.percent\x27, item).html( file.percent + \x27%\x27 );\x0a}\x0a\x0a// check to see if a large file failed to upload\x0afunction fileUploading( up, file ) {\x0a\x09var hundredmb = 100 * 1024 * 1024,\x0a\x09\x09max = parseInt( up.settings.max_file_size, 10 );\x0a\x0a\x09if ( max \x3e hundredmb && file.size \x3e hundredmb ) {\x0a\x09\x09setTimeout( function() {\x0a\x09\x09\x09if ( file.status \x3c 3 && file.loaded === 0 ) { // not uploading\x0a\x09\x09\x09\x09wpFileError( file, pluploadL10n.big_upload_failed.replace( \x27%1$s\x27, \x27\x3ca class=\x22uploader-html\x22 href=\x22#\x22\x3e\x27 ).replace( \x27%2$s\x27, \x27\x3c/a\x3e\x27 ) );\x0a\x09\x09\x09\x09up.stop(); // stops the whole queue\x0a\x09\x09\x09\x09up.removeFile( file );\x0a\x09\x09\x09\x09up.start(); // restart the queue\x0a\x09\x09\x09}\x0a\x09\x09}, 10000 ); // wait for 10 sec. for the file to start uploading\x0a\x09}\x0a}\x0a\x0afunction updateMediaForm() {\x0a\x09var items = jQuery(\x27#media-items\x27).children();\x0a\x0a\x09// Just one file, no need for collapsible part\x0a\x09if ( items.length == 1 ) {\x0a\x09\x09items.addClass(\x27open\x27).find(\x27.slidetoggle\x27).show();\x0a\x09\x09jQuery(\x27.insert-gallery\x27).hide();\x0a\x09} else if ( items.length \x3e 1 ) {\x0a\x09\x09items.removeClass(\x27open\x27);\x0a\x09\x09// Only show Gallery/Playlist buttons when there are at least two files.\x0a\x09\x09jQuery(\x27.insert-gallery\x27).show();\x0a\x09}\x0a\x0a\x09// Only show Save buttons when there is at least one file.\x0a\x09if ( items.not(\x27.media-blank\x27).length \x3e 0 )\x0a\x09\x09jQuery(\x27.savebutton\x27).show();\x0a\x09else\x0a\x09\x09jQuery(\x27.savebutton\x27).hide();\x0a}\x0a\x0afunction uploadSuccess(fileObj, serverData) {\x0a\x09var item = jQuery(\x27#media-item-\x27 + fileObj.id);\x0a\x0a\x09// on success serverData should be numeric, fix bug in html4 runtime returning the serverData wrapped in a \x3cpre\x3e tag\x0a\x09serverData = serverData.replace(/^\x3cpre\x3e(\x5cd+)\x3c\x5c/pre\x3e$/, \x27$1\x27);\x0a\x0a\x09// if async-upload returned an error message, place it in the media item div and return\x0a\x09if ( serverData.match(/media-upload-error|error-div/) ) {\x0a\x09\x09item.html(serverData);\x0a\x09\x09return;\x0a\x09} else {\x0a\x09\x09jQuery(\x27.percent\x27, item).html( pluploadL10n.crunching );\x0a\x09}\x0a\x0a\x09prepareMediaItem(fileObj, serverData);\x0a\x09updateMediaForm();\x0a\x0a\x09// Increment the counter.\x0a\x09if ( post_id && item.hasClass(\x27child-of-\x27 + post_id) )\x0a\x09\x09jQuery(\x27#attachments-count\x27).text(1 * jQuery(\x27#attachments-count\x27).text() + 1);\x0a}\x0a\x0afunction setResize( arg ) {\x0a\x09if ( arg ) {\x0a\x09\x09if ( window.resize_width && window.resize_height ) {\x0a\x09\x09\x09uploader.settings.resize = {\x0a\x09\x09\x09\x09enabled: true,\x0a\x09\x09\x09\x09width: window.resize_width,\x0a\x09\x09\x09\x09height: window.resize_height,\x0a\x09\x09\x09\x09quality: 100\x0a\x09\x09\x09};\x0a\x09\x09} else {\x0a\x09\x09\x09uploader.settings.multipart_params.image_resize = true;\x0a\x09\x09}\x0a\x09} else {\x0a\x09\x09delete( uploader.settings.multipart_params.image_resize );\x0a\x09}\x0a}\x0a\x0afunction prepareMediaItem(fileObj, serverData) {\x0a\x09var f = ( typeof shortform == \x27undefined\x27 ) ? 1 : 2, item = jQuery(\x27#media-item-\x27 + fileObj.id);\x0a\x09if ( f == 2 && shortform \x3e 2 )\x0a\x09\x09f = shortform;\x0a\x0a\x09try {\x0a\x09\x09if ( typeof topWin.tb_remove != \x27undefined\x27 )\x0a\x09\x09\x09topWin.jQuery(\x27#TB_overlay\x27).click(topWin.tb_remove);\x0a\x09} catch(e){}\x0a\x0a\x09if ( isNaN(serverData) || !serverData ) { // Old style: Append the HTML returned by the server -- thumbnail and form inputs\x0a\x09\x09item.append(serverData);\x0a\x09\x09prepareMediaItemInit(fileObj);\x0a\x09} else { // New style: server data is just the attachment ID, fetch the thumbnail and form html from the server\x0a\x09\x09item.load(\x27async-upload.php\x27, {attachment_id:serverData, fetch:f}, function(){prepareMediaItemInit(fileObj);updateMediaForm();});\x0a\x09}\x0a}\x0a\x0afunction prepareMediaItemInit(fileObj) {\x0a\x09var item = jQuery(\x27#media-item-\x27 + fileObj.id);\x0a\x09// Clone the thumbnail as a \x22pinkynail\x22 -- a tiny image to the left of the filename\x0a\x09jQuery(\x27.thumbnail\x27, item).clone().attr(\x27class\x27, \x27pinkynail toggle\x27).prependTo(item);\x0a\x0a\x09// Replace the original filename with the new (unique) one assigned during upload\x0a\x09jQuery(\x27.filename.original\x27, item).replaceWith( jQuery(\x27.filename.new\x27, item) );\x0a\x0a\x09// Bind AJAX to the new Delete button\x0a\x09jQuery(\x27a.delete\x27, item).click(function(){\x0a\x09\x09// Tell the server to delete it. TODO: handle exceptions\x0a\x09\x09jQuery.ajax({\x0a\x09\x09\x09url: ajaxurl,\x0a\x09\x09\x09type: \x27post\x27,\x0a\x09\x09\x09success: deleteSuccess,\x0a\x09\x09\x09error: deleteError,\x0a\x09\x09\x09id: fileObj.id,\x0a\x09\x09\x09data: {\x0a\x09\x09\x09\x09id : this.id.replace(/[^0-9]/g, \x27\x27),\x0a\x09\x09\x09\x09action : \x27trash-post\x27,\x0a\x09\x09\x09\x09_ajax_nonce : this.href.replace(/^.*wpnonce=/,\x27\x27)\x0a\x09\x09\x09}\x0a\x09\x09});\x0a\x09\x09return false;\x0a\x09});\x0a\x0a\x09// Bind AJAX to the new Undo button\x0a\x09jQuery(\x27a.undo\x27, item).click(function(){\x0a\x09\x09// Tell the server to untrash it. TODO: handle exceptions\x0a\x09\x09jQuery.ajax({\x0a\x09\x09\x09url: ajaxurl,\x0a\x09\x09\x09type: \x27post\x27,\x0a\x09\x09\x09id: fileObj.id,\x0a\x09\x09\x09data: {\x0a\x09\x09\x09\x09id : this.id.replace(/[^0-9]/g,\x27\x27),\x0a\x09\x09\x09\x09action: \x27untrash-post\x27,\x0a\x09\x09\x09\x09_ajax_nonce: this.href.replace(/^.*wpnonce=/,\x27\x27)\x0a\x09\x09\x09},\x0a\x09\x09\x09success: function( ){\x0a\x09\x09\x09\x09var type,\x0a\x09\x09\x09\x09\x09item = jQuery(\x27#media-item-\x27 + fileObj.id);\x0a\x0a\x09\x09\x09\x09if ( type = jQuery(\x27#type-of-\x27 + fileObj.id).val() )\x0a\x09\x09\x09\x09\x09jQuery(\x27#\x27 + type + \x27-counter\x27).text(jQuery(\x27#\x27 + type + \x27-counter\x27).text()-0+1);\x0a\x0a\x09\x09\x09\x09if ( post_id && item.hasClass(\x27child-of-\x27+post_id) )\x0a\x09\x09\x09\x09\x09jQuery(\x27#attachments-count\x27).text(jQuery(\x27#attachments-count\x27).text()-0+1);\x0a\x0a\x09\x09\x09\x09jQuery(\x27.filename .trashnotice\x27, item).remove();\x0a\x09\x09\x09\x09jQuery(\x27.filename .title\x27, item).css(\x27font-weight\x27,\x27normal\x27);\x0a\x09\x09\x09\x09jQuery(\x27a.undo\x27, item).addClass(\x27hidden\x27);\x0a\x09\x09\x09\x09jQuery(\x27.menu_order_input\x27, item).show();\x0a\x09\x09\x09\x09item.css( {backgroundColor:\x27#ceb\x27} ).animate( {backgroundColor: \x27#fff\x27}, { queue: false, duration: 500, complete: function(){ jQuery(this).css({backgroundColor:\x27\x27}); } }).removeClass(\x27undo\x27);\x0a\x09\x09\x09}\x0a\x09\x09});\x0a\x09\x09return false;\x0a\x09});\x0a\x0a\x09// Open this item if it says to start open (e.g. to display an error)\x0a\x09jQuery(\x27#media-item-\x27 + fileObj.id + \x27.startopen\x27).removeClass(\x27startopen\x27).addClass(\x27open\x27).find(\x27slidetoggle\x27).fadeIn();\x0a}\x0a\x0a// generic error message\x0afunction wpQueueError(message) {\x0a\x09jQuery(\x27#media-upload-error\x27).show().html( \x27\x3cdiv class=\x22error\x22\x3e\x3cp\x3e\x27 + message + \x27\x3c/p\x3e\x3c/div\x3e\x27 );\x0a}\x0a\x0a// file-specific error messages\x0afunction wpFileError(fileObj, message) {\x0a\x09itemAjaxError(fileObj.id, message);\x0a}\x0a\x0afunction itemAjaxError(id, message) {\x0a\x09var item = jQuery(\x27#media-item-\x27 + id), filename = item.find(\x27.filename\x27).text(), last_err = item.data(\x27last-err\x27);\x0a\x0a\x09if ( last_err == id ) // prevent firing an error for the same file twice\x0a\x09\x09return;\x0a\x0a\x09item.html(\x27\x3cdiv class=\x22error-div\x22\x3e\x27 +\x0a\x09\x09\x09\x09\x27\x3ca class=\x22dismiss\x22 href=\x22#\x22\x3e\x27 + pluploadL10n.dismiss + \x27\x3c/a\x3e\x27 +\x0a\x09\x09\x09\x09\x27\x3cstrong\x3e\x27 + pluploadL10n.error_uploading.replace(\x27%s\x27, jQuery.trim(filename)) + \x27\x3c/strong\x3e \x27 +\x0a\x09\x09\x09\x09message +\x0a\x09\x09\x09\x09\x27\x3c/div\x3e\x27).data(\x27last-err\x27, id);\x0a}\x0a\x0afunction deleteSuccess(data) {\x0a\x09var type, id, item;\x0a\x09if ( data == \x27-1\x27 )\x0a\x09\x09return itemAjaxError(this.id, \x27You do not have permission. Has your session expired?\x27);\x0a\x0a\x09if ( data == \x270\x27 )\x0a\x09\x09return itemAjaxError(this.id, \x27Could not be deleted. Has it been deleted already?\x27);\x0a\x0a\x09id = this.id;\x0a\x09item = jQuery(\x27#media-item-\x27 + id);\x0a\x0a\x09// Decrement the counters.\x0a\x09if ( type = jQuery(\x27#type-of-\x27 + id).val() )\x0a\x09\x09jQuery(\x27#\x27 + type + \x27-counter\x27).text( jQuery(\x27#\x27 + type + \x27-counter\x27).text() - 1 );\x0a\x0a\x09if ( post_id && item.hasClass(\x27child-of-\x27+post_id) )\x0a\x09\x09jQuery(\x27#attachments-count\x27).text( jQuery(\x27#attachments-count\x27).text() - 1 );\x0a\x0a\x09if ( jQuery(\x27form.type-form #media-items\x27).children().length == 1 && jQuery(\x27.hidden\x27, \x27#media-items\x27).length \x3e 0 ) {\x0a\x09\x09jQuery(\x27.toggle\x27).toggle();\x0a\x09\x09jQuery(\x27.slidetoggle\x27).slideUp(200).siblings().removeClass(\x27hidden\x27);\x0a\x09}\x0a\x0a\x09// Vanish it.\x0a\x09jQuery(\x27.toggle\x27, item).toggle();\x0a\x09jQuery(\x27.slidetoggle\x27, item).slideUp(200).siblings().removeClass(\x27hidden\x27);\x0a\x09item.css( {backgroundColor:\x27#faa\x27} ).animate( {backgroundColor:\x27#f4f4f4\x27}, {queue:false, duration:500} ).addClass(\x27undo\x27);\x0a\x0a\x09jQuery(\x27.filename:empty\x27, item).remove();\x0a\x09jQuery(\x27.filename .title\x27, item).css(\x27font-weight\x27,\x27bold\x27);\x0a\x09jQuery(\x27.filename\x27, item).append(\x27\x3cspan class=\x22trashnotice\x22\x3e \x27 + pluploadL10n.deleted + \x27 \x3c/span\x3e\x27).siblings(\x27a.toggle\x27).hide();\x0a\x09jQuery(\x27.filename\x27, item).append( jQuery(\x27a.undo\x27, item).removeClass(\x27hidden\x27) );\x0a\x09jQuery(\x27.menu_order_input\x27, item).hide();\x0a\x0a\x09return;\x0a}\x0a\x0afunction deleteError() {\x0a\x09// TODO\x0a}\x0a\x0afunction uploadComplete() {\x0a\x09jQuery(\x27#insert-gallery\x27).prop(\x27disabled\x27, false);\x0a}\x0a\x0afunction switchUploader(s) {\x0a\x09if ( s ) {\x0a\x09\x09deleteUserSetting(\x27uploader\x27);\x0a\x09\x09jQuery(\x27.media-upload-form\x27).removeClass(\x27html-uploader\x27);\x0a\x0a\x09\x09if ( typeof(uploader) == \x27object\x27 )\x0a\x09\x09\x09uploader.refresh();\x0a\x09} else {\x0a\x09\x09setUserSetting(\x27uploader\x27, \x271\x27); // 1 == html uploader\x0a\x09\x09jQuery(\x27.media-upload-form\x27).addClass(\x27html-uploader\x27);\x0a\x09}\x0a}\x0a\x0afunction uploadError(fileObj, errorCode, message, uploader) {\x0a\x09var hundredmb = 100 * 1024 * 1024, max;\x0a\x0a\x09switch (errorCode) {\x0a\x09\x09case plupload.FAILED:\x0a\x09\x09\x09wpFileError(fileObj, pluploadL10n.upload_failed);\x0a\x09\x09\x09break;\x0a\x09\x09case plupload.FILE_EXTENSION_ERROR:\x0a\x09\x09\x09wpFileExtensionError( uploader, fileObj, pluploadL10n.invalid_filetype );\x0a\x09\x09\x09break;\x0a\x09\x09case plupload.FILE_SIZE_ERROR:\x0a\x09\x09\x09uploadSizeError(uploader, fileObj);\x0a\x09\x09\x09break;\x0a\x09\x09case plupload.IMAGE_FORMAT_ERROR:\x0a\x09\x09\x09wpFileError(fileObj, pluploadL10n.not_an_image);\x0a\x09\x09\x09break;\x0a\x09\x09case plupload.IMAGE_MEMORY_ERROR:\x0a\x09\x09\x09wpFileError(fileObj, pluploadL10n.image_memory_exceeded);\x0a\x09\x09\x09break;\x0a\x09\x09case plupload.IMAGE_DIMENSIONS_ERROR:\x0a\x09\x09\x09wpFileError(fileObj, pluploadL10n.image_dimensions_exceeded);\x0a\x09\x09\x09break;\x0a\x09\x09case plupload.GENERIC_ERROR:\x0a\x09\x09\x09wpQueueError(pluploadL10n.upload_failed);\x0a\x09\x09\x09break;\x0a\x09\x09case plupload.IO_ERROR:\x0a\x09\x09\x09max = parseInt( uploader.settings.filters.max_file_size, 10 );\x0a\x0a\x09\x09\x09if ( max \x3e hundredmb && fileObj.size \x3e hundredmb )\x0a\x09\x09\x09\x09wpFileError( fileObj, pluploadL10n.big_upload_failed.replace(\x27%1$s\x27, \x27\x3ca class=\x22uploader-html\x22 href=\x22#\x22\x3e\x27).replace(\x27%2$s\x27, \x27\x3c/a\x3e\x27) );\x0a\x09\x09\x09else\x0a\x09\x09\x09\x09wpQueueError(pluploadL10n.io_error);\x0a\x09\x09\x09break;\x0a\x09\x09case plupload.HTTP_ERROR:\x0a\x09\x09\x09wpQueueError(pluploadL10n.http_error);\x0a\x09\x09\x09break;\x0a\x09\x09case plupload.INIT_ERROR:\x0a\x09\x09\x09jQuery(\x27.media-upload-form\x27).addClass(\x27html-uploader\x27);\x0a\x09\x09\x09break;\x0a\x09\x09case plupload.SECURITY_ERROR:\x0a\x09\x09\x09wpQueueError(pluploadL10n.security_error);\x0a\x09\x09\x09break;\x0a/*\x09\x09case plupload.UPLOAD_ERROR.UPLOAD_STOPPED:\x0a\x09\x09case plupload.UPLOAD_ERROR.FILE_CANCELLED:\x0a\x09\x09\x09jQuery(\x27#media-item-\x27 + fileObj.id).remove();\x0a\x09\x09\x09break;*/\x0a\x09\x09default:\x0a\x09\x09\x09wpFileError(fileObj, pluploadL10n.default_error);\x0a\x09}\x0a}\x0a\x0afunction uploadSizeError( up, file ) {\x0a\x09var message, errorDiv;\x0a\x0a\x09message = pluploadL10n.file_exceeds_size_limit.replace(\x27%s\x27, file.name);\x0a\x0a\x09// Construct the error div.\x0a\x09errorDiv = jQuery( \x27\x3cdiv /\x3e\x27 )\x0a\x09\x09.attr( {\x0a\x09\x09\x09\x27id\x27:    \x27media-item-\x27 + file.id,\x0a\x09\x09\x09\x27class\x27: \x27media-item error\x27\x0a\x09\x09} )\x0a\x09\x09.append(\x0a\x09\x09\x09jQuery( \x27\x3cp /\x3e\x27 )\x0a\x09\x09\x09\x09.text( message )\x0a\x09\x09);\x0a\x0a\x09// Append the error.\x0a\x09jQuery(\x27#media-items\x27).append( errorDiv );\x0a\x09up.removeFile(file);\x0a}\x0a\x0afunction wpFileExtensionError( up, file, message ) {\x0a\x09jQuery(\x27#media-items\x27).append(\x27\x3cdiv id=\x22media-item-\x27 + file.id + \x27\x22 class=\x22media-item error\x22\x3e\x3cp\x3e\x27 + message + \x27\x3c/p\x3e\x3c/div\x3e\x27);\x0a\x09up.removeFile(file);\x0a}\x0a\x0ajQuery(document).ready(function($){\x0a\x09$(\x27.media-upload-form\x27).bind(\x27click.uploader\x27, function(e) {\x0a\x09\x09var target = $(e.target), tr, c;\x0a\x0a\x09\x09if ( target.is(\x27input[type=\x22radio\x22]\x27) ) { // remember the last used image size and alignment\x0a\x09\x09\x09tr = target.closest(\x27tr\x27);\x0a\x0a\x09\x09\x09if ( tr.hasClass(\x27align\x27) )\x0a\x09\x09\x09\x09setUserSetting(\x27align\x27, target.val());\x0a\x09\x09\x09else if ( tr.hasClass(\x27image-size\x27) )\x0a\x09\x09\x09\x09setUserSetting(\x27imgsize\x27, target.val());\x0a\x0a\x09\x09} else if ( target.is(\x27button.button\x27) ) { // remember the last used image link url\x0a\x09\x09\x09c = e.target.className || \x27\x27;\x0a\x09\x09\x09c = c.match(/url([^ \x27\x22]+)/);\x0a\x0a\x09\x09\x09if ( c && c[1] ) {\x0a\x09\x09\x09\x09setUserSetting(\x27urlbutton\x27, c[1]);\x0a\x09\x09\x09\x09target.siblings(\x27.urlfield\x27).val( target.data(\x27link-url\x27) );\x0a\x09\x09\x09}\x0a\x09\x09} else if ( target.is(\x27a.dismiss\x27) ) {\x0a\x09\x09\x09target.parents(\x27.media-item\x27).fadeOut(200, function(){\x0a\x09\x09\x09\x09$(this).remove();\x0a\x09\x09\x09});\x0a\x09\x09} else if ( target.is(\x27.upload-flash-bypass a\x27) || target.is(\x27a.uploader-html\x27) ) { // switch uploader to html4\x0a\x09\x09\x09$(\x27#media-items, p.submit, span.big-file-warning\x27).css(\x27display\x27, \x27none\x27);\x0a\x09\x09\x09switchUploader(0);\x0a\x09\x09\x09e.preventDefault();\x0a\x09\x09} else if ( target.is(\x27.upload-html-bypass a\x27) ) { // switch uploader to multi-file\x0a\x09\x09\x09$(\x27#media-items, p.submit, span.big-file-warning\x27).css(\x27display\x27, \x27\x27);\x0a\x09\x09\x09switchUploader(1);\x0a\x09\x09\x09e.preventDefault();\x0a\x09\x09} else if ( target.is(\x27a.describe-toggle-on\x27) ) { // Show\x0a\x09\x09\x09target.parent().addClass(\x27open\x27);\x0a\x09\x09\x09target.siblings(\x27.slidetoggle\x27).fadeIn(250, function(){\x0a\x09\x09\x09\x09var S = $(window).scrollTop(), H = $(window).height(), top = $(this).offset().top, h = $(this).height(), b, B;\x0a\x0a\x09\x09\x09\x09if ( H && top && h ) {\x0a\x09\x09\x09\x09\x09b = top + h;\x0a\x09\x09\x09\x09\x09B = S + H;\x0a\x0a\x09\x09\x09\x09\x09if ( b \x3e B ) {\x0a\x09\x09\x09\x09\x09\x09if ( b - B \x3c top - S )\x0a\x09\x09\x09\x09\x09\x09\x09window.scrollBy(0, (b - B) + 10);\x0a\x09\x09\x09\x09\x09\x09else\x0a\x09\x09\x09\x09\x09\x09\x09window.scrollBy(0, top - S - 40);\x0a\x09\x09\x09\x09\x09}\x0a\x09\x09\x09\x09}\x0a\x09\x09\x09});\x0a\x09\x09\x09e.preventDefault();\x0a\x09\x09} else if ( target.is(\x27a.describe-toggle-off\x27) ) { // Hide\x0a\x09\x09\x09target.siblings(\x27.slidetoggle\x27).fadeOut(250, function(){\x0a\x09\x09\x09\x09target.parent().removeClass(\x27open\x27);\x0a\x09\x09\x09});\x0a\x09\x09\x09e.preventDefault();\x0a\x09\x09}\x0a\x09});\x0a\x0a\x09// init and set the uploader\x0a\x09uploader_init = function() {\x0a\x09\x09var isIE = navigator.userAgent.indexOf(\x27Trident/\x27) != -1 || navigator.userAgent.indexOf(\x27MSIE \x27) != -1;\x0a\x0a\x09\x09// Make sure flash sends cookies (seems in IE it does whitout switching to urlstream mode)\x0a\x09\x09if ( ! isIE && \x27flash\x27 === plupload.predictRuntime( wpUploaderInit ) &&\x0a\x09\x09\x09( ! wpUploaderInit.required_features || ! wpUploaderInit.required_features.hasOwnProperty( \x27send_binary_string\x27 ) ) ) {\x0a\x0a\x09\x09\x09wpUploaderInit.required_features = wpUploaderInit.required_features || {};\x0a\x09\x09\x09wpUploaderInit.required_features.send_binary_string = true;\x0a\x09\x09}\x0a\x0a\x09\x09uploader = new plupload.Uploader(wpUploaderInit);\x0a\x0a\x09\x09$(\x27#image_resize\x27).bind(\x27change\x27, function() {\x0a\x09\x09\x09var arg = $(this).prop(\x27checked\x27);\x0a\x0a\x09\x09\x09setResize( arg );\x0a\x0a\x09\x09\x09if ( arg )\x0a\x09\x09\x09\x09setUserSetting(\x27upload_resize\x27, \x271\x27);\x0a\x09\x09\x09else\x0a\x09\x09\x09\x09deleteUserSetting(\x27upload_resize\x27);\x0a\x09\x09});\x0a\x0a\x09\x09uploader.bind(\x27Init\x27, function(up) {\x0a\x09\x09\x09var uploaddiv = $(\x27#plupload-upload-ui\x27);\x0a\x0a\x09\x09\x09setResize( getUserSetting(\x27upload_resize\x27, false) );\x0a\x0a\x09\x09\x09if ( up.features.dragdrop && ! $(document.body).hasClass(\x27mobile\x27) ) {\x0a\x09\x09\x09\x09uploaddiv.addClass(\x27drag-drop\x27);\x0a\x09\x09\x09\x09$(\x27#drag-drop-area\x27).on(\x27dragover.wp-uploader\x27, function(){ // dragenter doesn\x27t fire right :(\x0a\x09\x09\x09\x09\x09uploaddiv.addClass(\x27drag-over\x27);\x0a\x09\x09\x09\x09}).on(\x27dragleave.wp-uploader, drop.wp-uploader\x27, function(){\x0a\x09\x09\x09\x09\x09uploaddiv.removeClass(\x27drag-over\x27);\x0a\x09\x09\x09\x09});\x0a\x09\x09\x09} else {\x0a\x09\x09\x09\x09uploaddiv.removeClass(\x27drag-drop\x27);\x0a\x09\x09\x09\x09$(\x27#drag-drop-area\x27).off(\x27.wp-uploader\x27);\x0a\x09\x09\x09}\x0a\x0a\x09\x09\x09if ( up.runtime === \x27html4\x27 ) {\x0a\x09\x09\x09\x09$(\x27.upload-flash-bypass\x27).hide();\x0a\x09\x09\x09}\x0a\x09\x09});\x0a\x0a\x09\x09uploader.bind( \x27postinit\x27, function( up ) {\x0a\x09\x09\x09up.refresh();\x0a\x09\x09});\x0a\x0a\x09\x09uploader.init();\x0a\x0a\x09\x09uploader.bind(\x27FilesAdded\x27, function( up, files ) {\x0a\x09\x09\x09$(\x27#media-upload-error\x27).empty();\x0a\x09\x09\x09uploadStart();\x0a\x0a\x09\x09\x09plupload.each( files, function( file ) {\x0a\x09\x09\x09\x09fileQueued( file );\x0a\x09\x09\x09});\x0a\x0a\x09\x09\x09up.refresh();\x0a\x09\x09\x09up.start();\x0a\x09\x09});\x0a\x0a\x09\x09uploader.bind(\x27UploadFile\x27, function(up, file) {\x0a\x09\x09\x09fileUploading(up, file);\x0a\x09\x09});\x0a\x0a\x09\x09uploader.bind(\x27UploadProgress\x27, function(up, file) {\x0a\x09\x09\x09uploadProgress(up, file);\x0a\x09\x09});\x0a\x0a\x09\x09uploader.bind(\x27Error\x27, function(up, err) {\x0a\x09\x09\x09uploadError(err.file, err.code, err.message, up);\x0a\x09\x09\x09up.refresh();\x0a\x09\x09});\x0a\x0a\x09\x09uploader.bind(\x27FileUploaded\x27, function(up, file, response) {\x0a\x09\x09\x09uploadSuccess(file, response.response);\x0a\x09\x09});\x0a\x0a\x09\x09uploader.bind(\x27UploadComplete\x27, function() {\x0a\x09\x09\x09uploadComplete();\x0a\x09\x09});\x0a\x09};\x0a\x0a\x09if ( typeof(wpUploaderInit) == \x27object\x27 ) {\x0a\x09\x09uploader_init();\x0a\x09}\x0a\x0a});\x0a\x09\x96\xe0HM!'}